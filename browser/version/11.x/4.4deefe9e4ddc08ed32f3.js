(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{DYYV:function(e,t,n){"use strict";n.r(t),n.d(t,"FormPagesModule",function(){return I});var o=n("tyNb"),i=n("fXoL"),s=n("3Pt+"),r=n("ofXK"),a=n("xgIS"),c=n("Kj3r");const l=new i.r("NU_MONACO_EDITOR_CONFIG");let h,u=!1,d=(()=>{class e{constructor(e,t,n,o){this.el=e,this.doc=n,this.ngZone=o,this._disabled=!1,this.height="200px",this.delay=0,this.event=new i.n,this._config=Object.assign({baseUrl:"https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min"},t),this.options=this._config.defaultOptions}set disabled(e){this._disabled="string"==typeof e||e,this.setDisabled()}set options(e){this._options=Object.assign(Object.assign({},this._config.defaultOptions),e)}get options(){return this._options}initMonaco(e,t){}notifyEvent(e,t){this.ngZone.run(()=>this.event.emit(Object.assign({type:e,editor:this._editor},t)))}setDisabled(){return this._editor&&this._editor.updateOptions({readOnly:this._disabled}),this}init(){u?h.then(()=>this.initMonaco(this.options,!0)):(u=!0,h=new Promise((e,t)=>{const n=window;if(null==n)return void e();if(n.monaco)return void e();const o=this._config.baseUrl,i=()=>{n.require.config({paths:{vs:`${o}/vs`}}),n.require(["vs/editor/editor.main"],()=>{"function"==typeof this._config.monacoLoad&&this._config.monacoLoad(n.monaco),this.initMonaco(this.options,!0),e()},()=>{t("Unable to load editor/editor.main module, please check your network environment.")})};if(n.require)i();else{const e=this.doc.createElement("script");e.type="text/javascript",e.src=`${o}/vs/loader.js`,e.onload=i,e.onerror=()=>t(`Unable to load ${e.src}, please check your network environment.`),this.doc.getElementsByTagName("head")[0].appendChild(e)}}).catch(e=>this.notifyEvent("load-error",{error:e})))}cleanResize(){return this._resize$&&this._resize$.unsubscribe(),this}registerResize(){return this.cleanResize(),this._resize$=Object(a.a)(window,"resize").pipe(Object(c.a)(100)).subscribe(()=>{this._editor.layout(),this.notifyEvent("resize")}),this}updateOptions(){this._editor&&this.ngZone.runOutsideAngular(()=>{this._editor.dispose(),this.initMonaco(this._options,!1)})}ngAfterViewInit(){this.ngZone.runOutsideAngular(()=>setTimeout(()=>this.init(),+this.delay))}ngOnChanges(e){const t=Object.keys(e);1===t.length&&"disabled"===t[0]||this.updateOptions()}ngOnDestroy(){this.cleanResize(),this._editor&&(this._editor.dispose(),this._editor=void 0)}}return e.\u0275fac=function(t){return new(t||e)(i.Sb(i.l),i.Sb(l),i.Sb(r.e),i.Sb(i.A))},e.\u0275cmp=i.Mb({type:e,selectors:[["nu-monaco-base"]],inputs:{height:"height",delay:"delay",options:"options",disabled:"disabled"},outputs:{event:"event"},features:[i.Cb],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})(),m=(()=>{class e extends d{constructor(){super(...arguments),this._value="",this.onChange=e=>{},this.onTouched=()=>{}}get editor(){return this._editor}initMonaco(e,t){const n=!!this.model;if(n){const t=monaco.editor.getModel(this.model.uri||"");if(t)e.model=t,e.model.setValue(this._value);else{const{value:t,language:n,uri:o}=this.model;e.model=monaco.editor.createModel(t||this._value,n,o)}}const o=this._editor=monaco.editor.create(this.el.nativeElement,e);n||o.setValue(this._value),o.onDidChangeModelContent(()=>{const e=o.getValue();this.ngZone.run(()=>{this._value=e,this.onChange(e)})}),o.onDidBlurEditorWidget(()=>this.onTouched()),this.registerResize(),o.getAction("editor.action.formatDocument").run().then(()=>this.notifyEvent(t?"init":"re-init"))}writeValue(e){this._value=e||"",this._editor&&this._editor.setValue(this._value)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e,this.setDisabled()}}return e.\u0275fac=function(t){return b(t||e)},e.\u0275cmp=i.Mb({type:e,selectors:[["nu-monaco-editor"]],hostVars:4,hostBindings:function(e,t){2&e&&i.Lc("display","block")("height",t.height)},inputs:{model:"model"},exportAs:["nuMonacoEditor"],features:[i.Db([{provide:s.k,useExisting:Object(i.W)(()=>e),multi:!0}]),i.Bb],decls:0,vars:0,template:function(e,t){},encapsulation:2,changeDetection:0}),e})();const b=i.ac(m);let p=(()=>{class e{static forRoot(t){return{ngModule:e,providers:[{provide:l,useValue:t}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.Qb({type:e}),e.\u0275inj=i.Pb({imports:[[r.c]]}),e})();var f=n("0qEG"),g=n("PCNd"),z=n("zwnO"),v=n("EF3F"),y=n("XNiG"),C=n("1G5W"),E=n("THAA"),S=n("lgOS"),O=n("PScX"),_=n("B+r4"),M=n("zAKX"),w=n("bE2y"),T=n("OzZK"),k=n("C2AL"),D=n("RwU8"),X=n("nJia"),Y=n("FwiY"),j=n("oyxB"),x=n("w1IW"),V=n("gSbp");const $=["schemaEditor"],A=["formCodeEditor"],L=["uiEditor"];function N(e,t){if(1&e&&i.Tb(0,"nz-option",24),2&e){const e=t.$implicit;i.rc("nzValue",e.name)("nzLabel",e.title)}}function B(e,t){if(1&e){const e=i.Zb();i.Yb(0,"div",1),i.Yb(1,"sf",25),i.fc("formSubmit",function(t){return i.Ec(e),i.jc().submit(t)})("formChange",function(t){return i.Ec(e),i.jc().change(t)})("formValueChange",function(t){return i.Ec(e),i.jc().valueChange(t)})("formError",function(t){return i.Ec(e),i.jc().error(t)}),i.Xb(),i.Xb()}if(2&e){const e=i.jc();i.rc("nzSpan",e.expand?12:24),i.Eb(1),i.rc("schema",e.schemaData)("formData",e.formData)("ui",e.uiSchema)("layout",e.layout)}}const F=[{path:"",component:f.a,children:[{path:"validator/:lang",component:(()=>{class e{constructor(e,t,n,o,i,s){this.i18n=e,this.codeSrv=t,this.http=n,this.msg=o,this.appService=i,this.cdr=s,this.destroy$=new y.a,this.files=[{name:"basic",title:"\u57fa\u672c"},{name:"conditional",title:"\u6761\u4ef6"},{name:"sort",title:"\u987a\u5e8f"},{name:"validation",title:"\u81ea\u5b9a\u4e49\u6821\u9a8c"},{name:"fixed",title:"\u4e0d\u89c4\u5219\u5e03\u5c40"}],this.layout="horizontal",this.expand=!0,this.editorOptions={language:"json",theme:"vs"},this.name=this.files[0].name,this.title=this.files[0].title,this.appService.theme$.pipe(Object(C.a)(this.destroy$)).subscribe(e=>{this.editorOptions={language:"json",theme:"dark"===e?"vs-dark":"vs"}})}ngOnInit(){this.getSchema()}refreshLayout(e){setTimeout(()=>{this[e].editor.layout()},100)}getSchema(){const e=this.files.find(e=>e.name===this.name);if(e){if(this.name=e.name,this.title=e.title,e.cache)return this.schema=e.cache,void this.run();this.http.get(`./assets/schema/${e.name}.json`,null,{responseType:"text"}).subscribe(t=>{e.cache=t,this.schema=e.cache,this.run()})}}run(){this.schemaData=JSON.parse(this.schema||"{}"),this.formData=JSON.parse(this.formCode||"{}"),this.uiSchema=JSON.parse(this.uiCode||"{}"),this.cdr.detectChanges()}openOnStackBlitz(){const e={schema:this.schema,layout:this.layout,formData:this.formCode||"{}",ui:this.uiCode||"{}"},t="\nimport { Component } from '@angular/core';\nimport { SFSchema } from '@delon/form';\nimport { NzMessageService } from 'ng-zorro-antd/message';\n\n@Component({\n  selector: 'demo',\n  template: `\n  <sf [schema]=\"schema\" [formData]=\"formData\" [ui]=\"ui\" [layout]=\"layout\"\n      (formSubmit)=\"submit($event)\"\n      (formChange)=\"change($event)\"\n      (formError)=\"error($event)\"></sf>\n    `\n})\nexport class DemoComponent {\n  schema = {schema};\n  formData = {formData};\n  ui = {ui};\n  layout = '{layout}';\n\n  constructor(private msg: NzMessageService) { }\n\n  submit(value: any) {\n    this.msg.success(JSON.stringify(value));\n  }\n\n  change(value: any) {\n    console.log('formChange', value);\n  }\n\n  error(value: any) {\n    console.log('formError', value);\n  }\n}".replace(/\{(\w+)\}/g,(t,n)=>(e[n]||"").trim());this.codeSrv.openOnStackBlitz(t)}onCopy(){Object(v.e)(this.schema).then(()=>this.msg.success(this.i18n.fanyi("app.demo.copied")))}submit(e){this.msg.success(JSON.stringify(e))}change(e){console.log("formChange",e)}valueChange(e){console.log("formChange",e)}error(e){console.log("formError",e)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return e.\u0275fac=function(t){return new(t||e)(i.Sb(z.a),i.Sb(E.a),i.Sb(z.p),i.Sb(O.b),i.Sb(S.a),i.Sb(i.h))},e.\u0275cmp=i.Mb({type:e,selectors:[["form-validator"]],viewQuery:function(e,t){if(1&e&&(i.Uc($,1),i.Uc(A,1),i.Uc(L,1)),2&e){let e;i.Ac(e=i.gc())&&(t.schemaEditor=e.first),i.Ac(e=i.gc())&&(t.formCodeEditor=e.first),i.Ac(e=i.gc())&&(t.uiEditor=e.first)}},decls:34,vars:23,consts:[["nz-row","",1,"border-bottom-1","pb-sm","mb-md"],["nz-col","",3,"nzSpan"],[3,"ngModel","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[1,"ml-sm",3,"ngModel","ngModelChange"],["nz-radio-button","","nzValue","horizontal"],["nz-radio-button","","nzValue","vertical"],["nz-radio-button","","nzValue","inline"],["nz-col","",1,"text-right",3,"nzSpan"],["nz-tooltip","","nz-button","",3,"nzTooltipTitle","click"],["nz-icon","",3,"nzType"],["nz-tooltip","","nz-button","",1,"ml-sm",3,"nzTooltipTitle","click"],["nz-icon","","nzType","form"],["nz-icon","","nzType","copy"],["nz-row","",1,"border-bottom-1","pb-sm","mb-md",3,"nzGutter"],["nz-col","",3,"nzSpan","hidden"],["nzTitle","Schema",3,"nzClick"],["height","500px",3,"ngModel","options","ngModelChange"],["schemaEditor",""],["nzTitle","Form Data",3,"nzClick"],["formCodeEditor",""],["nzTitle","UI Schema",3,"nzClick"],["uiEditor",""],["nz-col","",3,"nzSpan",4,"ngIf"],[3,"nzValue","nzLabel"],[3,"schema","formData","ui","layout","formSubmit","formChange","formValueChange","formError"]],template:function(e,t){1&e&&(i.Yb(0,"div",0),i.Yb(1,"div",1),i.Yb(2,"nz-select",2),i.fc("ngModelChange",function(e){return t.name=e})("ngModelChange",function(){return t.getSchema()}),i.Oc(3,N,1,2,"nz-option",3),i.Xb(),i.Yb(4,"nz-radio-group",4),i.fc("ngModelChange",function(e){return t.layout=e}),i.Yb(5,"label",5),i.Qc(6,"\u6c34\u5e73"),i.Xb(),i.Yb(7,"label",6),i.Qc(8,"\u5782\u76f4"),i.Xb(),i.Yb(9,"label",7),i.Qc(10,"\u884c\u5185"),i.Xb(),i.Xb(),i.Xb(),i.Yb(11,"div",8),i.Yb(12,"nz-button-group"),i.Yb(13,"button",9),i.fc("click",function(){return t.expand=!t.expand}),i.Tb(14,"i",10),i.Xb(),i.Yb(15,"button",11),i.fc("click",function(){return t.openOnStackBlitz()}),i.kc(16,"i18n"),i.Tb(17,"i",12),i.Xb(),i.Yb(18,"button",11),i.fc("click",function(){return t.onCopy()}),i.kc(19,"i18n"),i.Tb(20,"i",13),i.Xb(),i.Xb(),i.Xb(),i.Xb(),i.Yb(21,"div",14),i.Yb(22,"div",15),i.Yb(23,"nz-tabset"),i.Yb(24,"nz-tab",16),i.fc("nzClick",function(){return t.refreshLayout("schemaEditor")}),i.Yb(25,"nu-monaco-editor",17,18),i.fc("ngModelChange",function(e){return t.schema=e})("ngModelChange",function(){return t.run()}),i.Xb(),i.Xb(),i.Yb(27,"nz-tab",19),i.fc("nzClick",function(){return t.refreshLayout("formCodeEditor")}),i.Yb(28,"nu-monaco-editor",17,20),i.fc("ngModelChange",function(e){return t.formCode=e})("ngModelChange",function(){return t.run()}),i.Xb(),i.Xb(),i.Yb(30,"nz-tab",21),i.fc("nzClick",function(){return t.refreshLayout("uiEditor")}),i.Yb(31,"nu-monaco-editor",17,22),i.fc("ngModelChange",function(e){return t.uiCode=e})("ngModelChange",function(){return t.run()}),i.Xb(),i.Xb(),i.Xb(),i.Xb(),i.Oc(33,B,2,5,"div",23),i.Xb()),2&e&&(i.Eb(1),i.rc("nzSpan",18),i.Eb(1),i.rc("ngModel",t.name),i.Eb(1),i.rc("ngForOf",t.files),i.Eb(1),i.rc("ngModel",t.layout),i.Eb(7),i.rc("nzSpan",6),i.Eb(2),i.rc("nzTooltipTitle",t.expand?"Hide Code":"Show Code"),i.Eb(1),i.tc("nzType","vertical-",t.expand?"right":"left",""),i.Eb(1),i.rc("nzTooltipTitle",i.lc(16,19,"app.demo.stackblitz")),i.Eb(3),i.rc("nzTooltipTitle",i.lc(19,21,"app.demo.copy")),i.Eb(3),i.rc("nzGutter",24),i.Eb(1),i.rc("nzSpan",12)("hidden",!t.expand),i.Eb(3),i.rc("ngModel",t.schema)("options",t.editorOptions),i.Eb(3),i.rc("ngModel",t.formCode)("options",t.editorOptions),i.Eb(3),i.rc("ngModel",t.uiCode)("options",t.editorOptions),i.Eb(2),i.rc("ngIf",t.schemaData))},directives:[_.c,_.a,M.e,s.m,s.p,r.n,w.c,w.b,w.a,T.b,k.a,T.a,D.a,X.d,Y.a,j.b,j.a,m,r.o,M.a,x.a],pipes:[V.a],encapsulation:2,changeDetection:0}),e})(),data:{titleI18n:"app.header.menu.form.validator"}}]}];let I=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.Qb({type:e}),e.\u0275inj=i.Pb({imports:[[g.a,p.forRoot({defaultOptions:{scrollBeyondLastLine:!1}}),o.n.forChild(F)]]}),e})()}}]);