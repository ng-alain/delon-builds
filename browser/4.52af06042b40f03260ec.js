(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{DYYV:function(e,t,n){"use strict";n.r(t),n.d(t,"FormPagesModule",function(){return F});var o=n("tyNb"),i=n("fXoL"),s=n("3Pt+"),a=n("ofXK"),r=n("xgIS"),c=n("Kj3r");const l=new i.q("NU_MONACO_EDITOR_CONFIG");let h,u=!1,d=(()=>{class e{constructor(e,t,n,o){this.el=e,this.doc=n,this.ngZone=o,this._disabled=!1,this.height="200px",this.delay=0,this.event=new i.n,this._config=Object.assign({baseUrl:"https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min"},t),this.options=this._config.defaultOptions}set disabled(e){this._disabled="string"==typeof e||e,this.setDisabled()}set options(e){this._options=Object.assign(Object.assign({},this._config.defaultOptions),e)}get options(){return this._options}initMonaco(e,t){}notifyEvent(e,t){this.ngZone.run(()=>this.event.emit(Object.assign({type:e,editor:this._editor},t)))}setDisabled(){return this._editor&&this._editor.updateOptions({readOnly:this._disabled}),this}init(){u?h.then(()=>this.initMonaco(this.options,!0)):(u=!0,h=new Promise((e,t)=>{const n=window;if(null==n)return void e();if(n.monaco)return void e();const o=this._config.baseUrl,i=()=>{n.require.config({paths:{vs:`${o}/vs`}}),n.require(["vs/editor/editor.main"],()=>{"function"==typeof this._config.monacoLoad&&this._config.monacoLoad(n.monaco),this.initMonaco(this.options,!0),e()},()=>{t("Unable to load editor/editor.main module, please check your network environment.")})};if(n.require)i();else{const e=this.doc.createElement("script");e.type="text/javascript",e.src=`${o}/vs/loader.js`,e.onload=i,e.onerror=()=>t(`Unable to load ${e.src}, please check your network environment.`),this.doc.getElementsByTagName("head")[0].appendChild(e)}}).catch(e=>this.notifyEvent("load-error",{error:e})))}cleanResize(){return this._resize$&&this._resize$.unsubscribe(),this}registerResize(){return this.cleanResize(),this._resize$=Object(r.a)(window,"resize").pipe(Object(c.a)(100)).subscribe(()=>{this._editor.layout(),this.notifyEvent("resize")}),this}updateOptions(){this._editor&&this.ngZone.runOutsideAngular(()=>{this._editor.dispose(),this.initMonaco(this._options,!1)})}ngAfterViewInit(){this.ngZone.runOutsideAngular(()=>setTimeout(()=>this.init(),+this.delay))}ngOnChanges(e){const t=Object.keys(e);1===t.length&&"disabled"===t[0]||this.updateOptions()}ngOnDestroy(){this.cleanResize(),this._editor&&(this._editor.dispose(),this._editor=void 0)}}return e.\u0275fac=function(t){return new(t||e)(i.Pb(i.l),i.Pb(l),i.Pb(a.e),i.Pb(i.z))},e.\u0275cmp=i.Jb({type:e,selectors:[["nu-monaco-base"]],inputs:{height:"height",delay:"delay",options:"options",disabled:"disabled"},outputs:{event:"event"},features:[i.zb],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})(),m=(()=>{class e extends d{constructor(){super(...arguments),this._value="",this.onChange=e=>{},this.onTouched=()=>{}}get editor(){return this._editor}initMonaco(e,t){const n=!!this.model;if(n){const t=monaco.editor.getModel(this.model.uri||"");if(t)e.model=t,e.model.setValue(this._value);else{const{value:t,language:n,uri:o}=this.model;e.model=monaco.editor.createModel(t||this._value,n,o)}}const o=this._editor=monaco.editor.create(this.el.nativeElement,e);n||o.setValue(this._value),o.onDidChangeModelContent(()=>{const e=o.getValue();this.ngZone.run(()=>{this._value=e,this.onChange(e)})}),o.onDidBlurEditorWidget(()=>this.onTouched()),this.registerResize(),o.getAction("editor.action.formatDocument").run().then(()=>this.notifyEvent(t?"init":"re-init"))}writeValue(e){this._value=e||"",this._editor&&this._editor.setValue(this._value)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e,this.setDisabled()}}return e.\u0275fac=function(t){return b(t||e)},e.\u0275cmp=i.Jb({type:e,selectors:[["nu-monaco-editor"]],hostVars:4,hostBindings:function(e,t){2&e&&i.Kc("display","block")("height",t.height)},inputs:{model:"model"},exportAs:["nuMonacoEditor"],features:[i.Ab([{provide:s.k,useExisting:Object(i.V)(()=>e),multi:!0}]),i.yb],decls:0,vars:0,template:function(e,t){},encapsulation:2,changeDetection:0}),e})();const b=i.Xb(m);let p=(()=>{class e{static forRoot(t){return{ngModule:e,providers:[{provide:l,useValue:t}]}}}return e.\u0275mod=i.Nb({type:e}),e.\u0275inj=i.Mb({factory:function(t){return new(t||e)},imports:[[a.c]]}),e})();var g=n("0qEG"),f=n("PCNd"),z=n("zwnO"),v=n("EF3F"),y=n("XNiG"),C=n("1G5W"),O=n("THAA"),V=n("lgOS"),S=n("PScX"),_=n("B+r4"),M=n("zAKX"),w=n("bE2y"),E=n("OzZK"),T=n("C2AL"),U=n("RwU8"),B=n("nJia"),D=n("FwiY"),k=n("oyxB"),x=n("w1IW"),j=n("sYmb");const N=["schemaEditor"],P=["formCodeEditor"],$=["uiEditor"];function L(e,t){if(1&e&&i.Qb(0,"nz-option",24),2&e){const e=t.$implicit;i.oc("nzValue",e.name)("nzLabel",e.title)}}function A(e,t){if(1&e){const e=i.Wb();i.Vb(0,"div",1),i.Vb(1,"sf",25),i.cc("formSubmit",function(t){return i.Bc(e),i.gc().submit(t)})("formChange",function(t){return i.Bc(e),i.gc().change(t)})("formValueChange",function(t){return i.Bc(e),i.gc().valueChange(t)})("formError",function(t){return i.Bc(e),i.gc().error(t)}),i.Ub(),i.Ub()}if(2&e){const e=i.gc();i.oc("nzSpan",e.expand?12:24),i.Bb(1),i.oc("schema",e.schemaData)("formData",e.formData)("ui",e.uiSchema)("layout",e.layout)}}const J=[{path:"",component:g.a,children:[{path:"validator/:lang",component:(()=>{class e{constructor(e,t,n,o,i,s){this.i18n=e,this.codeSrv=t,this.http=n,this.msg=o,this.appService=i,this.cdr=s,this.destroy$=new y.a,this.files=[{name:"basic",title:"\u57fa\u672c"},{name:"conditional",title:"\u6761\u4ef6"},{name:"sort",title:"\u987a\u5e8f"},{name:"validation",title:"\u81ea\u5b9a\u4e49\u6821\u9a8c"},{name:"fixed",title:"\u4e0d\u89c4\u5219\u5e03\u5c40"}],this.layout="horizontal",this.expand=!0,this.editorOptions={language:"json",theme:"vs"},this.name=this.files[0].name,this.title=this.files[0].title,this.appService.theme$.pipe(Object(C.a)(this.destroy$)).subscribe(e=>{this.editorOptions={language:"json",theme:"dark"===e?"vs-dark":"vs"}})}ngOnInit(){this.getSchema()}refreshLayout(e){setTimeout(()=>{this[e].editor.layout()},100)}getSchema(){const e=this.files.find(e=>e.name===this.name);if(e){if(this.name=e.name,this.title=e.title,e.cache)return this.schema=e.cache,void this.run();this.http.get(`./assets/schema/${e.name}.json`,null,{responseType:"text"}).subscribe(t=>{e.cache=t,this.schema=e.cache,this.run()})}}run(){this.schemaData=JSON.parse(this.schema||"{}"),this.formData=JSON.parse(this.formCode||"{}"),this.uiSchema=JSON.parse(this.uiCode||"{}"),this.cdr.detectChanges()}openOnStackBlitz(){const e={schema:this.schema,layout:this.layout,formData:this.formCode||"{}",ui:this.uiCode||"{}"},t="\nimport { Component } from '@angular/core';\nimport { SFSchema } from '@delon/form';\nimport { NzMessageService } from 'ng-zorro-antd/message';\n\n@Component({\n  selector: 'demo',\n  template: `\n  <sf [schema]=\"schema\" [formData]=\"formData\" [ui]=\"ui\" [layout]=\"layout\"\n      (formSubmit)=\"submit($event)\"\n      (formChange)=\"change($event)\"\n      (formError)=\"error($event)\"></sf>\n    `\n})\nexport class DemoComponent {\n  schema = {schema};\n  formData = {formData};\n  ui = {ui};\n  layout = '{layout}';\n\n  constructor(private msg: NzMessageService) { }\n\n  submit(value: any) {\n    this.msg.success(JSON.stringify(value));\n  }\n\n  change(value: any) {\n    console.log('formChange', value);\n  }\n\n  error(value: any) {\n    console.log('formError', value);\n  }\n}".replace(/\{(\w+)\}/g,(t,n)=>(e[n]||"").trim());this.codeSrv.openOnStackBlitz(t)}onCopy(){Object(v.g)(this.schema).then(()=>this.msg.success(this.i18n.fanyi("app.demo.copied")))}submit(e){this.msg.success(JSON.stringify(e))}change(e){console.log("formChange",e)}valueChange(e){console.log("formChange",e)}error(e){console.log("formError",e)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return e.\u0275fac=function(t){return new(t||e)(i.Pb(z.a),i.Pb(O.a),i.Pb(z.s),i.Pb(S.b),i.Pb(V.a),i.Pb(i.h))},e.\u0275cmp=i.Jb({type:e,selectors:[["form-validator"]],viewQuery:function(e,t){if(1&e&&(i.Tc(N,!0),i.Tc(P,!0),i.Tc($,!0)),2&e){let e;i.xc(e=i.dc())&&(t.schemaEditor=e.first),i.xc(e=i.dc())&&(t.formCodeEditor=e.first),i.xc(e=i.dc())&&(t.uiEditor=e.first)}},decls:34,vars:22,consts:[["nz-row","",1,"border-bottom-1","pb-sm","mb-md"],["nz-col","",3,"nzSpan"],[3,"ngModel","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[1,"ml-sm",3,"ngModel","ngModelChange"],["nz-radio-button","","nzValue","horizontal"],["nz-radio-button","","nzValue","vertical"],["nz-radio-button","","nzValue","inline"],["nz-col","",1,"text-right",3,"nzSpan"],["nz-tooltip","","nz-button","",3,"nzTooltipTitle","click"],["nz-icon","",3,"nzType"],["nz-tooltip","","nz-button","",1,"ml-sm",3,"nzTooltipTitle","click"],["nz-icon","","nzType","form"],["nz-icon","","nzType","copy"],["nz-row","","nzGutter","24",1,"border-bottom-1","pb-sm","mb-md"],["nz-col","",3,"nzSpan","hidden"],["nzTitle","Schema",3,"nzClick"],["height","500px",3,"ngModel","options","ngModelChange"],["schemaEditor",""],["nzTitle","Form Data",3,"nzClick"],["formCodeEditor",""],["nzTitle","UI Schema",3,"nzClick"],["uiEditor",""],["nz-col","",3,"nzSpan",4,"ngIf"],[3,"nzValue","nzLabel"],[3,"schema","formData","ui","layout","formSubmit","formChange","formValueChange","formError"]],template:function(e,t){1&e&&(i.Vb(0,"div",0),i.Vb(1,"div",1),i.Vb(2,"nz-select",2),i.cc("ngModelChange",function(e){return t.name=e})("ngModelChange",function(){return t.getSchema()}),i.Nc(3,L,1,2,"nz-option",3),i.Ub(),i.Vb(4,"nz-radio-group",4),i.cc("ngModelChange",function(e){return t.layout=e}),i.Vb(5,"label",5),i.Pc(6,"\u6c34\u5e73"),i.Ub(),i.Vb(7,"label",6),i.Pc(8,"\u5782\u76f4"),i.Ub(),i.Vb(9,"label",7),i.Pc(10,"\u884c\u5185"),i.Ub(),i.Ub(),i.Ub(),i.Vb(11,"div",8),i.Vb(12,"nz-button-group"),i.Vb(13,"button",9),i.cc("click",function(){return t.expand=!t.expand}),i.Qb(14,"i",10),i.Ub(),i.Vb(15,"button",11),i.cc("click",function(){return t.openOnStackBlitz()}),i.hc(16,"translate"),i.Qb(17,"i",12),i.Ub(),i.Vb(18,"button",11),i.cc("click",function(){return t.onCopy()}),i.hc(19,"translate"),i.Qb(20,"i",13),i.Ub(),i.Ub(),i.Ub(),i.Ub(),i.Vb(21,"div",14),i.Vb(22,"div",15),i.Vb(23,"nz-tabset"),i.Vb(24,"nz-tab",16),i.cc("nzClick",function(){return t.refreshLayout("schemaEditor")}),i.Vb(25,"nu-monaco-editor",17,18),i.cc("ngModelChange",function(e){return t.schema=e})("ngModelChange",function(){return t.run()}),i.Ub(),i.Ub(),i.Vb(27,"nz-tab",19),i.cc("nzClick",function(){return t.refreshLayout("formCodeEditor")}),i.Vb(28,"nu-monaco-editor",17,20),i.cc("ngModelChange",function(e){return t.formCode=e})("ngModelChange",function(){return t.run()}),i.Ub(),i.Ub(),i.Vb(30,"nz-tab",21),i.cc("nzClick",function(){return t.refreshLayout("uiEditor")}),i.Vb(31,"nu-monaco-editor",17,22),i.cc("ngModelChange",function(e){return t.uiCode=e})("ngModelChange",function(){return t.run()}),i.Ub(),i.Ub(),i.Ub(),i.Ub(),i.Nc(33,A,2,5,"div",23),i.Ub()),2&e&&(i.Bb(1),i.oc("nzSpan",18),i.Bb(1),i.oc("ngModel",t.name),i.Bb(1),i.oc("ngForOf",t.files),i.Bb(1),i.oc("ngModel",t.layout),i.Bb(7),i.oc("nzSpan",6),i.Bb(2),i.oc("nzTooltipTitle",t.expand?"Hide Code":"Show Code"),i.Bb(1),i.qc("nzType","vertical-",t.expand?"right":"left",""),i.Bb(1),i.oc("nzTooltipTitle",i.ic(16,18,"app.demo.stackblitz")),i.Bb(3),i.oc("nzTooltipTitle",i.ic(19,20,"app.demo.copy")),i.Bb(4),i.oc("nzSpan",12)("hidden",!t.expand),i.Bb(3),i.oc("ngModel",t.schema)("options",t.editorOptions),i.Bb(3),i.oc("ngModel",t.formCode)("options",t.editorOptions),i.Bb(3),i.oc("ngModel",t.uiCode)("options",t.editorOptions),i.Bb(2),i.oc("ngIf",t.schemaData))},directives:[_.c,_.a,M.e,s.m,s.p,a.n,w.c,w.b,w.a,E.b,T.a,E.a,U.a,B.d,D.a,k.b,k.a,m,a.o,M.a,x.a],pipes:[j.b],encapsulation:2,changeDetection:0}),e})(),data:{titleI18n:"app.header.menu.form.validator"}}]}];let F=(()=>{class e{}return e.\u0275mod=i.Nb({type:e}),e.\u0275inj=i.Mb({factory:function(t){return new(t||e)},imports:[[f.a,p.forRoot({defaultOptions:{scrollBeyondLastLine:!1}}),o.n.forChild(J)]]}),e})()}}]);