{"version":3,"file":"radar.js.map","sources":["ng://@delon/chart/radar/radar.component.ts","ng://@delon/chart/radar/radar.module.ts"],"sourcesContent":["import {\n  Component,\n  Input,\n  HostBinding,\n  ViewChild,\n  ElementRef,\n  OnDestroy,\n  OnChanges,\n  NgZone,\n  TemplateRef,\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n} from '@angular/core';\nimport { toNumber, toBoolean } from '@delon/util';\n\ndeclare var G2: any;\n\n@Component({\n  selector: 'g2-radar',\n  templateUrl: './radar.component.html',\n  host: { '[class.g2-radar]': 'true' },\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  preserveWhitespaces: false,\n})\nexport class G2RadarComponent implements OnDestroy, OnChanges {\n  // #region fields\n\n  _title = '';\n  _titleTpl: TemplateRef<any>;\n  @Input()\n  set title(value: string | TemplateRef<any>) {\n    if (value instanceof TemplateRef) {\n      this._title = null;\n      this._titleTpl = value;\n    } else this._title = value;\n  }\n\n  @HostBinding('style.height.px')\n  @Input()\n  get height() {\n    return this._height;\n  }\n  set height(value: any) {\n    this._height = toNumber(value);\n  }\n  private _height = 0;\n\n  @Input()\n  padding: number[] = [44, 30, 16, 30];\n\n  @Input()\n  get hasLegend() {\n    return this._hasLegend;\n  }\n  set hasLegend(value: any) {\n    this._hasLegend = toBoolean(value);\n  }\n  private _hasLegend = true;\n\n  @Input()\n  set tickCount(value: any) {\n    this._tickCount = toNumber(value);\n  }\n  private _tickCount = 4;\n\n  @Input()\n  data: Array<{\n    name: string;\n    label: string;\n    value: number;\n    [key: string]: any;\n  }> = [];\n\n  @Input() colors = [\n    '#1890FF',\n    '#FACC14',\n    '#2FC25B',\n    '#8543E0',\n    '#F04864',\n    '#13C2C2',\n    '#fa8c16',\n    '#a0d911',\n  ];\n\n  // #endregion\n\n  @ViewChild('container')\n  private node: ElementRef;\n\n  private chart: any;\n  legendData: any[] = [];\n\n  constructor(private cd: ChangeDetectorRef, private zone: NgZone) {}\n\n  _click(i: number) {\n    this.legendData[i].checked = !this.legendData[i].checked;\n\n    if (this.chart) {\n      // const filterItem = this.legendData.filter(l => l.checked).map(l => l.name);\n      this.chart.filter(\n        'name',\n        (val: any) => this.legendData.find(w => w.name === val).checked,\n      );\n      this.chart.repaint();\n    }\n  }\n\n  private runInstall() {\n    this.zone.runOutsideAngular(() => setTimeout(() => this.install()));\n  }\n\n  private install() {\n    if (!this.data || (this.data && this.data.length < 1)) return;\n\n    this.uninstall();\n    this.node.nativeElement.innerHTML = '';\n\n    const chart = new G2.Chart({\n      container: this.node.nativeElement,\n      forceFit: true,\n      height: +this.height - (this.hasLegend ? 80 : 22),\n      padding: this.padding,\n    });\n    chart.source(this.data, {\n      value: {\n        min: 0,\n        tickCount: this._tickCount,\n      },\n    });\n\n    chart.coord('polar');\n    chart.legend(false);\n\n    chart.axis('label', {\n      line: null,\n      labelOffset: 8,\n      labels: {\n        label: {\n          fill: 'rgba(0, 0, 0, .65)',\n        },\n      },\n      grid: {\n        line: {\n          stroke: '#e9e9e9',\n          lineWidth: 1,\n          lineDash: [0, 0],\n        },\n      },\n    });\n\n    chart.axis('value', {\n      grid: {\n        type: 'polygon',\n        line: {\n          stroke: '#e9e9e9',\n          lineWidth: 1,\n          lineDash: [0, 0],\n        },\n      },\n      labels: {\n        label: {\n          fill: 'rgba(0, 0, 0, .65)',\n        },\n      },\n    });\n\n    chart\n      .line()\n      .position('label*value')\n      .color('name', this.colors);\n    chart\n      .point()\n      .position('label*value')\n      .color('name', this.colors)\n      .shape('circle')\n      .size(3);\n\n    chart.render();\n\n    this.chart = chart;\n\n    if (this.hasLegend) {\n      this.zone.run(() => {\n        this.legendData = chart\n          .getAllGeoms()[0]\n          ._attrs.dataArray.map((item: any) => {\n            const origin = item[0]._origin;\n            const result = {\n              name: origin.name,\n              color: item[0].color,\n              checked: true,\n              value: item.reduce((p, n) => p + n._origin.value, 0),\n            };\n\n            return result;\n          });\n        this.cd.detectChanges();\n      });\n    }\n  }\n\n  private uninstall() {\n    if (this.chart) {\n      this.chart.destroy();\n      this.chart = null;\n    }\n  }\n\n  ngOnChanges(): void {\n    this.runInstall();\n  }\n\n  ngOnDestroy(): void {\n    this.uninstall();\n  }\n}\n","import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { NgZorroAntdModule } from 'ng-zorro-antd';\nimport { DelonUtilModule } from '@delon/util';\n\nimport { G2RadarComponent } from './radar.component';\n\nconst COMPONENTS = [G2RadarComponent];\n\n@NgModule({\n  imports: [CommonModule, DelonUtilModule, NgZorroAntdModule],\n  declarations: [...COMPONENTS],\n  exports: [...COMPONENTS],\n})\nexport class G2RadarModule {\n  static forRoot(): ModuleWithProviders {\n    return { ngModule: G2RadarModule, providers: [] };\n  }\n}\n"],"names":[],"mappings":"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"}
