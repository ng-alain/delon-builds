/**
 * @license ng-alain(cipchk@qq.com) v2.0.0-beta.5
 * (c) 2018 Cipchk https://ng-alain.com/
 * License: MIT
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("rxjs"),require("rxjs/operators"),require("@delon/util"),require("@angular/common")):"function"==typeof define&&define.amd?define("@delon/chart/water-wave",["exports","@angular/core","rxjs","rxjs/operators","@delon/util","@angular/common"],t):t((e.delon=e.delon||{},e.delon.chart=e.delon.chart||{},e.delon.chart["water-wave"]={}),e.ng.core,e.rxjs,e.rxjs.operators,e.delon.util,e.ng.common)}(this,function(e,t,n,r,i,o){"use strict";var a=function(){function e(e,t,n,r){this.el=e,this.renderer=t,this.cd=n,this.zone=r,this._title="",this.color="#1890FF",this._height=160,this.resize$=null,this.initFlag=!1}return Object.defineProperty(e.prototype,"title",{set:function(e){e instanceof t.TemplateRef?(this._title=null,this._titleTpl=e):this._title=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(e){this._height=i.toNumber(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"percent",{get:function(){return this._percent},set:function(e){this._percent=i.toNumber(e)},enumerable:!0,configurable:!0}),e.prototype.renderChart=function(){var t=this.percent/100;if(t){this.node.nativeElement.innerHTML="";var n=this,e=this.node.nativeElement,h=e.getContext("2d"),r=e.width,c=e.height,u=r/2,i=2,p=u-i;h.beginPath(),h.lineWidth=2*i;for(var d=r-i,f=d/8,o=.2,g=o,v=i,y=0,m=0,a=.005,s=[],b=u-i,l=-Math.PI/2,w=!0,_=l;_<l+2*Math.PI;_+=1/(8*Math.PI))s.push([u+b*Math.cos(_),u+b*Math.sin(_)]);var C=s.shift();h.strokeStyle=this.color,h.moveTo(C[0],C[1]),function x(){if(h.clearRect(0,0,r,c),w)if(s.length){var e=s.shift();h.lineTo(e[0],e[1]),h.stroke()}else w=!1,h.lineTo(C[0],C[1]),h.stroke(),s=null,h.globalCompositeOperation="destination-over",h.beginPath(),h.lineWidth=i,h.arc(u,u,b,0,2*Math.PI,!0),h.beginPath(),h.save(),h.arc(u,u,u-3*i,0,2*Math.PI,!0),h.restore(),h.clip(),h.fillStyle="#1890FF";else.85<=t?o/4<g&&(g-=.01*o):t<=.1?g<1.5*o&&(g+=.01*o):(g<=o&&(g+=.01*o),o<=g&&(g-=.01*o)),0<t-m&&(m+=a),t-m<0&&(m-=a),y+=.07,function l(){h.beginPath(),h.save();for(var e=[],t=v;t<=v+d;t+=20/d){var n=y+(v+t)/f,r=Math.sin(n)*g,i=t,o=2*p*(1-m)+(u-p)-f*r;h.lineTo(i,o),e.push([i,o])}var a=e.shift();h.lineTo(v+d,c),h.lineTo(v,c),h.lineTo(a[0],a[1]);var s=h.createLinearGradient(0,0,0,c);s.addColorStop(0,"#ffffff"),s.addColorStop(1,"#1890FF"),h.fillStyle=s,h.fill(),h.restore()}();n.timer=requestAnimationFrame(x)}()}},e.prototype.updateRadio=function(e){this.renderer.setStyle(this.el.nativeElement,"transform","scale("+e+")")},e.prototype.installResizeEvent=function(){var e=this;this.resize$||(this.resize$=n.fromEvent(window,"resize").pipe(r.debounceTime(500)).subscribe(function(){return e.resize()}))},e.prototype.resize=function(){var e=this.el.nativeElement.parentNode.offsetWidth;this.updateRadio(e<this.height?e/this.height:1),this.renderChart()},e.prototype.ngOnInit=function(){var e=this;this.initFlag=!0,this.cd.detectChanges(),this.zone.runOutsideAngular(function(){e.updateRadio(1),e.installResizeEvent(),setTimeout(function(){return e.resize()},130)})},e.prototype.ngOnChanges=function(){var e=this;this.initFlag&&(this.cd.detectChanges(),this.zone.runOutsideAngular(function(){return e.renderChart()}))},e.prototype.ngOnDestroy=function(){this.timer&&cancelAnimationFrame(this.timer),this.resize$&&this.resize$.unsubscribe()},e.decorators=[{type:t.Component,args:[{selector:"g2-water-wave",template:'\n  <div [ngStyle]="{\'height.px\': height, \'width.px\': height, \'overflow\': \'hidden\'}">\n    <canvas #container class="g2-water-wave__canvas" width="{{height*2}}" height="{{height*2}}"></canvas>\n  </div>\n  <div class="g2-water-wave__desc" [ngStyle]="{\'width.px\': height}">\n    <ng-container *ngIf="_title; else _titleTpl"><span class="g2-water-wave__desc-title">{{_title}}</span></ng-container>\n    <h4 class="g2-water-wave__desc-percent">{{percent}}%</h4>\n  </div>',host:{"[class.g2-water-wave]":"true"},changeDetection:t.ChangeDetectionStrategy.OnPush,preserveWhitespaces:!1}]}],e.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2},{type:t.ChangeDetectorRef},{type:t.NgZone}]},e.propDecorators={title:[{type:t.Input}],color:[{type:t.Input}],height:[{type:t.Input}],percent:[{type:t.Input}],node:[{type:t.ViewChild,args:["container"]}]},e}();function s(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(i)throw i.error}}return a}function l(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(s(arguments[t]));return e}var h=[a],c=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[]}},e.decorators=[{type:t.NgModule,args:[{imports:[o.CommonModule,i.DelonUtilModule],declarations:l(h),exports:l(h)}]}],e}();e.G2WaterWaveComponent=a,e.G2WaterWaveModule=c,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=water-wave.umd.min.js.map