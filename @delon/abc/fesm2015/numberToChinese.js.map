{"version":3,"file":"numberToChinese.js","sources":["ng://@delon/abc/number-to-chinese/number-to-chinese.interfaces.ts","ng://@delon/abc/number-to-chinese/number-to-chinese.ts","ng://@delon/abc/number-to-chinese/number-to-chinese.pipe.ts","ng://@delon/abc/number-to-chinese/number-to-chinese.module.ts"],"sourcesContent":["/** é¢å¤åæ°éé¡¹ */\nexport interface NumberToChineseOptions {\n  /** æå®è´æ°ç¬¦å·ï¼é»è®¤ï¼`è´` */\n  minusSymbol?: string;\n  /** å½ä¼ éå¼æ æ³æ°å¼æ¶æåºå¼å¸¸ï¼é»è®¤ï¼`false` */\n  validThrow?: boolean;\n}\n","import { NumberToChineseOptions } from './number-to-chinese.interfaces';\n\nexport function numberToChinese(value: number | string, rmb = true, options?: NumberToChineseOptions): string {\n  options = {\n    minusSymbol: 'è´',\n    validThrow: false,\n    ...options,\n  };\n  if (typeof value === 'number') value = value.toString();\n  if (!/^-?\\d+(\\.\\d+)?$/.test(value) && options.validThrow) throw new Error(`${value} is invalid number type`);\n  let integer: number | string;\n  let decimal: number | string | null;\n  [integer, decimal] = value.split('.');\n  let symbol = '';\n  if (integer.startsWith('-')) {\n    symbol = options.minusSymbol!;\n    integer = integer.substr(1);\n  }\n  if (/^-?\\d+$/.test(value)) decimal = null;\n  integer = (+integer).toString();\n  const unit = {\n    num: rmb\n      ? ['', 'å£¹', 'è´°', 'å', 'è', 'ä¼', 'é', 'æ', 'æ', 'ç', 'ç¹']\n      : ['', 'ä¸', 'äº', 'ä¸', 'å', 'äº', 'å­', 'ä¸', 'å«', 'ä¹', 'ç¹'],\n    radice: rmb\n      ? [\n          '',\n          'æ¾',\n          'ä½°',\n          'ä»',\n          'ä¸',\n          'æ¾',\n          'ä½°',\n          'ä»',\n          'äº¿',\n          'æ¾',\n          'ä½°',\n          'ä»',\n          'ä¸äº¿',\n          'æ¾',\n          'ä½°',\n          'ä»',\n          'å',\n          'æ¾',\n          'ä½°',\n          'ä»',\n        ]\n      : [\n          '',\n          'å',\n          'ç¾',\n          'å',\n          'ä¸',\n          'å',\n          'ç¾',\n          'å',\n          'äº¿',\n          'å',\n          'ç¾',\n          'å',\n          'ä¸äº¿',\n          'å',\n          'ç¾',\n          'å',\n          'å',\n          'å',\n          'ç¾',\n          'å',\n        ],\n    dec: ['è§', 'å', 'å', 'æ¯«'],\n  };\n  if (rmb) value = (+value).toFixed(5).toString();\n  let integerRes = '';\n  const integerCount = integer.length;\n  if (integer === '0' || integerCount === 0) {\n    integerRes = 'é¶';\n  } else {\n    let cnDesc = '';\n    for (let i = 0; i < integerCount; i++) {\n      const n = +integer[i];\n      const j = integerCount - i - 1;\n      const isZero = i > 1 && n !== 0 && integer[i - 1] === '0';\n      const cnZero = isZero ? 'é¶' : '';\n      const isEmpptyUnit = (n === 0 && j % 4 !== 0) || integer.substr(i - 3, 4) === '0000';\n      const descMark = cnDesc;\n      let cnNum = unit.num[n];\n\n      cnDesc = isEmpptyUnit ? '' : unit.radice[j];\n      // ç¬¬ä¸ä½æ¯ä¸å\n      if (i === 0 && cnNum === 'ä¸' && cnDesc === 'å') cnNum = '';\n      const isChangeEr =\n        n > 1 &&\n        cnNum === 'äº' && // å»é¤é¦ä½\n        ['', 'å', 'ç¾'].indexOf(cnDesc) === -1 && // ä¸è¯»ä¸¤\\ä¸¤å\\ä¸¤ç¾\n        descMark !== 'å'; // ä¸è¯»åä¸¤\n      if (isChangeEr) cnNum = 'ä¸¤';\n      integerRes += cnZero + cnNum + cnDesc;\n    }\n  }\n\n  // å°æ°é¨åæ¼æ¥\n  let decimalRes = '';\n  const decimalCount = decimal ? decimal.toString().length : 0;\n  if (decimal === null) {\n    decimalRes = rmb ? 'æ´' : '';\n  } else if (decimal === '0') {\n    decimalRes = 'é¶';\n  } else {\n    for (let i = 0; i < decimalCount; i++) {\n      if (rmb && i > unit.dec.length - 1) break;\n      const n = decimal[i];\n      const cnZero = n === '0' ? 'é¶' : '';\n      const cnNum = unit.num[n];\n      const cnDesc = rmb ? unit.dec[i] : '';\n      decimalRes += cnZero + cnNum + cnDesc;\n    }\n  }\n  const ret =\n    symbol +\n    (rmb\n      ? integerRes + (decimalRes === 'é¶' ? 'åæ´' : `å${decimalRes}`)\n      : integerRes + (decimalRes === '' ? '' : `ç¹${decimalRes}`));\n  return ret;\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { numberToChinese } from './number-to-chinese';\n\n@Pipe({ name: 'n2c' })\nexport class NaNumberToChinesePipe implements PipeTransform {\n  transform(value: number | string, rmb: boolean = true, minusSymbol: string = 'è´'): string {\n    return numberToChinese(value, rmb, { minusSymbol });\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\n\nimport { NaNumberToChinesePipe } from './number-to-chinese.pipe';\n\nconst PIPES = [NaNumberToChinesePipe];\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: PIPES,\n  exports: PIPES,\n})\nexport class NumberToChineseModule {}\n"],"names":[],"mappings":"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"}