{"version":3,"file":"qr.js.map","sources":["ng://@delon/abc/qr/qr.config.ts","ng://@delon/abc/qr/qr.service.ts","ng://@delon/abc/qr/qr.component.ts","ng://@delon/abc/qr/qr.module.ts"],"sourcesContent":["export class QRConfig {\n  /** èæ¯ï¼é»è®¤ï¼`white` */\n  background = 'white';\n  /** èæ¯éæçº§å«ï¼èå´ï¼`0-1` ä¹é´ï¼é»è®¤ï¼`1.0` */\n  backgroundAlpha = 1.0;\n  /** åæ¯ï¼é»è®¤ï¼`black` */\n  foreground = 'black';\n  /** åæ¯éæçº§å«ï¼èå´ï¼`0-1` ä¹é´ï¼é»è®¤ï¼`1.0` */\n  foregroundAlpha = 1.0;\n  /** è¯¯å·®æ ¡æ­£çº§å«ï¼é»è®¤ï¼`L` */\n  level: 'L' | 'M' | 'Q' | 'H' = 'L';\n  /** äºç»´ç è¾åºå¾çMIMEç±»åï¼é»è®¤ï¼`image/png` */\n  mime = 'image/png';\n  /** åè¾¹è·ï¼åä½ï¼pxï¼ï¼é»è®¤ï¼`10` */\n  padding = 10;\n  /** å¤§å°ï¼åä½ï¼pxï¼ï¼é»è®¤ï¼`220` */\n  size = 220;\n}\n","import { Injectable } from '@angular/core';\nimport { QRConfig } from './qr.config';\n\ndeclare var QRious: any;\n\n@Injectable()\nexport class QRService {\n  /** å½åqrå®ä¾ */\n  readonly qr: any;\n  /** èæ¯ */\n  background: string;\n  /** èæ¯éæçº§å«ï¼èå´ï¼`0-1` ä¹é´ */\n  backgroundAlpha = 1.0;\n  /** åæ¯ */\n  foreground: string;\n  /** åæ¯éæçº§å«ï¼èå´ï¼`0-1` ä¹é´ */\n  foregroundAlpha: number;\n  /** è¯¯å·®æ ¡æ­£çº§å« */\n  level: string;\n  /** äºç»´ç è¾åºå¾çMIMEç±»å */\n  mime: string;\n  /** åè¾¹è·ï¼åä½ï¼pxï¼ */\n  padding: number;\n  /** å¤§å°ï¼åä½ï¼pxï¼ */\n  size: number;\n  /** å¼ */\n  value: string;\n\n  constructor(cog: QRConfig) {\n    Object.assign(this, cog);\n    this.qr = new QRious();\n  }\n\n  /**\n   * çæäºç»´ç ï¼å¹¶è¿åBase64ç¼ç \n   *\n   * @param [value] éæ°æå®å¼\n   */\n  refresh(value?: string | Object): string {\n    this.qr.set(typeof value === 'object' ? value : {\n      background: this.background,\n      backgroundAlpha: this.backgroundAlpha,\n      foreground: this.foreground,\n      foregroundAlpha: this.foregroundAlpha,\n      level: this.level,\n      padding: this.padding,\n      size: this.size,\n      value: value || this.value,\n    });\n    return this.dataURL;\n  }\n\n  /**\n   * è¿åå½åäºç»´ç Base64ç¼ç \n   */\n  get dataURL(): string {\n    return this.qr.toDataURL();\n  }\n}\n","import {\n  Component,\n  Input,\n  ChangeDetectionStrategy,\n  OnChanges,\n  ChangeDetectorRef,\n  HostBinding,\n  Output,\n  EventEmitter,\n} from '@angular/core';\nimport { InputNumber } from '@delon/util';\n\nimport { QRService } from './qr.service';\nimport { QRConfig } from './qr.config';\n\n@Component({\n  selector: 'qr',\n  template: `\n  <img class=\"qr__img\" src=\"{{dataURL}}\">\n  `,\n  preserveWhitespaces: false,\n  host: { '[class.qr]': 'true' },\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class QRComponent implements OnChanges {\n  dataURL: string;\n  // region: fields\n\n  /** èæ¯ */\n  @Input()\n  background: string;\n  /** èæ¯éæçº§å«ï¼èå´ï¼`0-1` ä¹é´ */\n  @Input()\n  backgroundAlpha: number;\n  /** åæ¯ */\n  @Input()\n  foreground: string;\n  /** åæ¯éæçº§å«ï¼èå´ï¼`0-1` ä¹é´ */\n  @Input()\n  foregroundAlpha: number;\n  /** è¯¯å·®æ ¡æ­£çº§å« */\n  @Input()\n  level: string;\n  /** äºç»´ç è¾åºå¾çMIMEç±»å */\n  @Input()\n  mime: string;\n  /** åè¾¹è·ï¼åä½ï¼pxï¼ */\n  @Input()\n  @InputNumber()\n  padding: number;\n  /** å¤§å°ï¼åä½ï¼pxï¼ */\n  @HostBinding('style.height.px')\n  @HostBinding('style.width.px')\n  @Input()\n  @InputNumber()\n  size: number;\n  /** å¼ */\n  @Input()\n  value: string;\n  /** åæ´æ¶åè° */\n  @Output()\n  change = new EventEmitter<string>();\n\n  // endregion\n\n  constructor(\n    cog: QRConfig,\n    private srv: QRService,\n    private cd: ChangeDetectorRef,\n  ) {\n    Object.assign(this, cog);\n  }\n\n  ngOnChanges(): void {\n    this.dataURL = this.srv.refresh({\n      background: this.background,\n      backgroundAlpha: this.backgroundAlpha,\n      foreground: this.foreground,\n      foregroundAlpha: this.foregroundAlpha,\n      level: this.level,\n      mime: this.mime,\n      padding: this.padding,\n      size: this.size,\n      value: this.value,\n    });\n    this.cd.detectChanges();\n    this.change.emit(this.dataURL);\n  }\n}\n","import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { DelonUtilModule } from '@delon/util';\n\nimport { QRConfig } from './qr.config';\nimport { QRComponent } from './qr.component';\nimport { QRService } from './qr.service';\n\nconst COMPONENTS = [QRComponent];\n\n@NgModule({\n  imports: [CommonModule, DelonUtilModule],\n  declarations: [...COMPONENTS],\n  exports: [...COMPONENTS],\n})\nexport class QRModule {\n  static forRoot(): ModuleWithProviders {\n    return { ngModule: QRModule, providers: [QRConfig, QRService] };\n  }\n}\n"],"names":[],"mappings":"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"}
