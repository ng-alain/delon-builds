/**
 * @license ng-alain(cipchk@qq.com) v7.0.1
 * (c) 2019 cipchk https://ng-alain.com/
 * License: MIT
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("rxjs"),require("rxjs/operators"),require("@delon/abc/reuse-tab"),require("@delon/theme"),require("@angular/common"),require("@angular/core"),require("@angular/router"),require("@delon/util"),require("ng-zorro-antd")):"function"==typeof define&&define.amd?define("@delon/abc/page-header",["exports","rxjs","rxjs/operators","@delon/abc/reuse-tab","@delon/theme","@angular/common","@angular/core","@angular/router","@delon/util","ng-zorro-antd"],t):t((e.delon=e.delon||{},e.delon.abc=e.delon.abc||{},e.delon.abc["page-header"]={}),e.rxjs,e.rxjs.operators,e.delon.abc["reuse-tab"],e.delon.theme,e.ng.common,e.ng.core,e.ng.router,e.delon.util,e["ng-zorro-antd"])}(this,function(e,u,c,t,n,i,r,d,o,a){"use strict";var h=function(){function e(){this.home="首页",this.homeLink="/",this.autoBreadcrumb=!0,this.recursiveBreadcrumb=!1,this.autoTitle=!0,this.syncTitle=!1,this.fixed=!1,this.fixedOffsetTop=64}return e.decorators=[{type:r.Injectable,args:[{providedIn:"root"}]}],e.ngInjectableDef=r.defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),f=function(){return(f=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function s(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;0<=s;s--)(r=e[s])&&(a=(o<3?r(a):3<o?r(t,n,a):r(t,n))||a);return 3<o&&a&&Object.defineProperty(t,n,a),a}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function p(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(i=o.next()).done;)a.push(i.value)}catch(s){r={error:s}}finally{try{i&&!i.done&&(n=o["return"])&&n.call(o)}finally{if(r)throw r.error}}return a}function g(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}var y=function(){function e(e,t,n,i,r,o,a,s,l){var p=this;this.renderer=n,this.router=i,this.menuSrv=r,this.i18nSrv=o,this.titleSrv=a,this.reuseSrv=s,this.cdr=l,this.inited=!1,this.unsubscribe$=new u.Subject,this.paths=[],this.loading=!1,this.wide=!1,Object.assign(this,f({},new h,e)),t.notify.pipe(c.takeUntil(this.unsubscribe$),c.filter(function(e){return p.affix&&"layout"===e.type&&"collapsed"===e.name})).subscribe(function(){return p.affix.updatePosition({})}),u.merge(r.change.pipe(c.filter(function(){return p.inited})),i.events.pipe(c.filter(function(e){return e instanceof d.NavigationEnd})),o.change).pipe(c.takeUntil(this.unsubscribe$)).subscribe(function(){p._menus=null,p.refresh()})}return Object.defineProperty(e.prototype,"menus",{get:function(){return this._menus||(this._menus=this.menuSrv.getPathByUrl(this.router.url.split("?")[0],this.recursiveBreadcrumb)),this._menus},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"title",{set:function(e){e instanceof r.TemplateRef?(this._title=null,this._titleTpl=e):this._title=e,this._titleVal=this._title},enumerable:!0,configurable:!0}),e.prototype.refresh=function(){this.setTitle().genBreadcrumb(),this.cdr.detectChanges()},e.prototype.genBreadcrumb=function(){var n=this;if(!(this.breadcrumb||!this.autoBreadcrumb||this.menus.length<=0)){var i=[];return this.menus.forEach(function(e){if("undefined"==typeof e.hideInBreadcrumb||!e.hideInBreadcrumb){var t=e.text;e.i18n&&n.i18nSrv&&(t=n.i18nSrv.fanyi(e.i18n)),i.push({title:t,link:e.link&&[e.link]})}}),this.home&&i.splice(0,0,{title:this.homeI18n&&this.i18nSrv&&this.i18nSrv.fanyi(this.homeI18n)||this.home,link:[this.homeLink]}),this.paths=i,this}this.paths=[]},e.prototype.setTitle=function(){if("undefined"==typeof this._title&&"undefined"==typeof this._titleTpl&&this.autoTitle&&0<this.menus.length){var e=this.menus[this.menus.length-1],t=e.text;e.i18n&&this.i18nSrv&&(t=this.i18nSrv.fanyi(e.i18n)),this._titleVal=t}return this._titleVal&&this.syncTitle&&(this.titleSrv&&this.titleSrv.setTitle(this._titleVal),this.reuseSrv&&(this.reuseSrv.title=this._titleVal)),this},e.prototype.checkContent=function(){o.isEmpty(this.conTpl.nativeElement)?this.renderer.setAttribute(this.conTpl.nativeElement,"hidden",""):this.renderer.removeAttribute(this.conTpl.nativeElement,"hidden")},e.prototype.ngOnInit=function(){this.refresh(),this.inited=!0},e.prototype.ngAfterViewInit=function(){this.checkContent()},e.prototype.ngOnChanges=function(){this.inited&&this.refresh()},e.prototype.ngOnDestroy=function(){var e=this.unsubscribe$;e.next(),e.complete()},e.decorators=[{type:r.Component,args:[{selector:"page-header",template:'<nz-affix #affix\n          *ngIf="fixed;else phTpl"\n          [nzOffsetTop]="fixedOffsetTop">\n  <ng-template [ngTemplateOutlet]="phTpl"></ng-template>\n</nz-affix>\n<ng-template #phTpl>\n  <div class="page-header">\n    <div [ngClass]="{\'page-header__wide\': wide}">\n      <nz-skeleton [nzLoading]="loading"\n                   [nzTitle]="false"\n                   [nzActive]="true"\n                   [nzParagraph]="{rows: 3}"\n                   [nzAvatar]="{ size: \'large\', shape: \'circle\' }">\n        <ng-container *ngIf="!breadcrumb; else breadcrumb">\n          <nz-breadcrumb *ngIf="paths && paths.length > 0">\n            <nz-breadcrumb-item *ngFor="let i of paths">\n              <ng-container *ngIf="i.link">\n                <a [routerLink]="i.link">{{i.title}}</a>\n              </ng-container>\n              <ng-container *ngIf="!i.link">{{i.title}}</ng-container>\n            </nz-breadcrumb-item>\n          </nz-breadcrumb>\n        </ng-container>\n        <div class="page-header__detail">\n          <div *ngIf="logo"\n               class="page-header__logo">\n            <ng-template [ngTemplateOutlet]="logo"></ng-template>\n          </div>\n          <div class="page-header__main">\n            <div class="page-header__row">\n              <h1 *ngIf="_titleVal || _titleTpl"\n                  class="page-header__title">\n                <ng-container *ngIf="_titleVal; else _titleTpl">{{_titleVal}}</ng-container>\n              </h1>\n              <div *ngIf="action"\n                   class="page-header__action">\n                <ng-template [ngTemplateOutlet]="action"></ng-template>\n              </div>\n            </div>\n            <div class="page-header__row">\n              <div class="page-header__desc"\n                   (cdkObserveContent)="checkContent()"\n                   #conTpl>\n                <ng-content></ng-content>\n                <ng-template [ngTemplateOutlet]="content"></ng-template>\n              </div>\n              <div *ngIf="extra"\n                   class="page-header__extra">\n                <ng-template [ngTemplateOutlet]="extra"></ng-template>\n              </div>\n            </div>\n          </div>\n        </div>\n        <ng-template [ngTemplateOutlet]="tab"></ng-template>\n      </nz-skeleton>\n    </div>\n  </div>\n</ng-template>\n',changeDetection:r.ChangeDetectionStrategy.OnPush}]}],e.ctorParameters=function(){return[{type:h},{type:n.SettingsService},{type:r.Renderer2},{type:d.Router},{type:n.MenuService},{type:undefined,decorators:[{type:r.Optional},{type:r.Inject,args:[n.ALAIN_I18N_TOKEN]}]},{type:n.TitleService,decorators:[{type:r.Optional},{type:r.Inject,args:[n.TitleService]}]},{type:t.ReuseTabService,decorators:[{type:r.Optional},{type:r.Inject,args:[t.ReuseTabService]}]},{type:r.ChangeDetectorRef}]},e.propDecorators={conTpl:[{type:r.ViewChild,args:["conTpl"]}],affix:[{type:r.ViewChild,args:["affix"]}],title:[{type:r.Input}],loading:[{type:r.Input}],wide:[{type:r.Input}],home:[{type:r.Input}],homeLink:[{type:r.Input}],homeI18n:[{type:r.Input}],autoBreadcrumb:[{type:r.Input}],autoTitle:[{type:r.Input}],syncTitle:[{type:r.Input}],fixed:[{type:r.Input}],fixedOffsetTop:[{type:r.Input}],breadcrumb:[{type:r.Input}],recursiveBreadcrumb:[{type:r.Input}],logo:[{type:r.Input}],action:[{type:r.Input}],content:[{type:r.Input}],extra:[{type:r.Input}],tab:[{type:r.Input}]},s([o.InputBoolean(),l("design:type",Object)],e.prototype,"loading",void 0),s([o.InputBoolean(),l("design:type",Object)],e.prototype,"wide",void 0),s([o.InputBoolean(),l("design:type",Boolean)],e.prototype,"autoBreadcrumb",void 0),s([o.InputBoolean(),l("design:type",Boolean)],e.prototype,"autoTitle",void 0),s([o.InputBoolean(),l("design:type",Boolean)],e.prototype,"syncTitle",void 0),s([o.InputBoolean(),l("design:type",Boolean)],e.prototype,"fixed",void 0),s([o.InputNumber(),l("design:type",Number)],e.prototype,"fixedOffsetTop",void 0),s([o.InputBoolean(),l("design:type",Boolean)],e.prototype,"recursiveBreadcrumb",void 0),e}(),m=[y],b=function(){function e(){}return e.decorators=[{type:r.NgModule,args:[{imports:[i.CommonModule,d.RouterModule,o.DelonUtilModule,a.NgZorroAntdModule],declarations:g(m),exports:g(m)}]}],e}();e.PageHeaderConfig=h,e.PageHeaderComponent=y,e.PageHeaderModule=b,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=pageHeader.umd.min.js.map