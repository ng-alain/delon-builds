/**
 * @license ng-alain(cipchk@qq.com) v2.0.0-beta.5
 * (c) 2018 Cipchk https://ng-alain.com/
 * License: MIT
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("rxjs"),require("rxjs/operators"),require("@angular/common"),require("@angular/router"),require("@delon/util")):"function"==typeof define&&define.amd?define("@delon/abc/full-content",["exports","@angular/core","rxjs","rxjs/operators","@angular/common","@angular/router","@delon/util"],t):t((e.delon=e.delon||{},e.delon.abc=e.delon.abc||{},e.delon.abc["full-content"]={}),e.ng.core,e.rxjs,e.rxjs.operators,e.ng.common,e.ng.router,e.delon.util)}(this,function(e,i,n,o,t,r,u){"use strict";function s(e,t,n,o){var r,i=arguments.length,u=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;0<=s;s--)(r=e[s])&&(u=(i<3?r(u):3<i?r(t,n,u):r(t,n))||u);return 3<i&&u&&Object.defineProperty(t,n,u),u}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function c(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,i=n.call(e),u=[];try{for(;(void 0===t||0<t--)&&!(o=i.next()).done;)u.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return u}function a(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(c(arguments[t]));return e}var p=function(){function e(){this._change=new n.BehaviorSubject(null)}return e.prototype.toggle=function(){this._change.next(!0)},Object.defineProperty(e.prototype,"change",{get:function(){return this._change.pipe(o.share())},enumerable:!0,configurable:!0}),e.decorators=[{type:i.Injectable}],e}(),d="full-content__body",h="full-content__opened",f="full-content__hidden-title",g=function(){function e(e,t,n,o,r){this.el=e,this.cd=t,this.srv=n,this.router=o,this.doc=r,this.inited=!1,this.id="_full-content-"+Math.random().toString(36).substring(2),this.scroll$=null,this._height=0,this.hideTitle=!0,this.padding=24,this.fullscreenChange=new i.EventEmitter}return e.prototype.updateCls=function(){var e=this.bodyEl.classList;this.fullscreen?(e.add(h),this.hideTitle&&e.add(f)):(e.remove(h),this.hideTitle&&e.remove(f))},e.prototype.update=function(){this.updateCls(),this.updateHeight(),this.fullscreenChange.emit(this.fullscreen)},e.prototype.updateHeight=function(){this._height=this.bodyEl.getBoundingClientRect().height-this.el.nativeElement.getBoundingClientRect().top-this.padding,this.cd.detectChanges()},e.prototype.removeInBody=function(){this.bodyEl.classList.remove(d,h,f)},e.prototype.ngOnInit=function(){var t=this;this.inited=!0,this.bodyEl=this.doc.querySelector("body"),this.bodyEl.classList.add(d),this.el.nativeElement.id=this.id,this.updateCls(),this.scroll$=n.fromEvent(window,"resize").pipe(o.debounceTime(200)).subscribe(function(){return t.updateHeight()}),this.srv$=this.srv.change.pipe(o.filter(function(e){return null!==e})).subscribe(function(){return t.toggle()}),this.route$=this.router.events.pipe(o.filter(function(e){return e instanceof r.ActivationStart||e instanceof r.ActivationEnd}),o.debounceTime(200)).subscribe(function(e){t.doc.querySelector("#"+t.id)?(t.bodyEl.classList.add(d),t.updateCls()):t.removeInBody()})},e.prototype.toggle=function(){this.fullscreen=!this.fullscreen,this.update(),this.updateHeight()},e.prototype.ngAfterViewInit=function(){var e=this;setTimeout(function(){return e.updateHeight()})},e.prototype.ngOnChanges=function(){this.inited&&this.update()},e.prototype.ngOnDestroy=function(){this.removeInBody(),this.scroll$.unsubscribe(),this.srv$.unsubscribe(),this.route$.unsubscribe()},e.decorators=[{type:i.Component,args:[{selector:"full-content",template:"<ng-content></ng-content>",host:{"[class.full-content]":"true"},changeDetection:i.ChangeDetectionStrategy.OnPush}]}],e.ctorParameters=function(){return[{type:i.ElementRef},{type:i.ChangeDetectorRef},{type:p},{type:r.Router},{type:undefined,decorators:[{type:i.Inject,args:[t.DOCUMENT]}]}]},e.propDecorators={_height:[{type:i.HostBinding,args:["style.height.px"]}],fullscreen:[{type:i.Input}],hideTitle:[{type:i.Input}],padding:[{type:i.Input}],fullscreenChange:[{type:i.Output}]},s([u.InputBoolean(),l("design:type",Boolean)],e.prototype,"fullscreen",void 0),s([u.InputBoolean(),l("design:type",Object)],e.prototype,"hideTitle",void 0),s([u.InputNumber(),l("design:type",Object)],e.prototype,"padding",void 0),e}(),y=function(){function e(e){this.parent=e}return e.prototype._click=function(){this.parent.toggle()},e.decorators=[{type:i.Directive,args:[{selector:"[full-toggle]"}]}],e.ctorParameters=function(){return[{type:g}]},e.propDecorators={_click:[{type:i.HostListener,args:["click"]}]},e}(),b=[g,y],m=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[p]}},e.decorators=[{type:i.NgModule,args:[{imports:[t.CommonModule,u.DelonUtilModule],declarations:a(b),exports:a(b)}]}],e}();e.FullContentComponent=g,e.FullContentService=p,e.FullContentToggleDirective=y,e.FullContentModule=m,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=fullContent.umd.min.js.map