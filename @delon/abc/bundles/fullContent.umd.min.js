/**
 * @license ng-alain(cipchk@qq.com) v7.0.0-rc.8
 * (c) 2019 cipchk https://ng-alain.com/
 * License: MIT
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/router"),require("rxjs"),require("rxjs/operators"),require("@angular/common"),require("@angular/core"),require("@delon/util")):"function"==typeof define&&define.amd?define("@delon/abc/full-content",["exports","@angular/router","rxjs","rxjs/operators","@angular/common","@angular/core","@delon/util"],t):t((e.delon=e.delon||{},e.delon.abc=e.delon.abc||{},e.delon.abc["full-content"]={}),e.ng.router,e.rxjs,e.rxjs.operators,e.ng.common,e.ng.core,e.delon.util)}(this,function(e,t,n,o,r,i,u){"use strict";function l(e,t,n,o){var r,i=arguments.length,u=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(e,t,n,o);else for(var l=e.length-1;0<=l;l--)(r=e[l])&&(u=(i<3?r(u):3<i?r(t,n,u):r(t,n))||u);return 3<i&&u&&Object.defineProperty(t,n,u),u}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function s(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,i=n.call(e),u=[];try{for(;(void 0===t||0<t--)&&!(o=i.next()).done;)u.push(o.value)}catch(l){r={error:l}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return u}function a(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(s(arguments[t]));return e}var d=function(){function e(){this._change=new n.BehaviorSubject(null)}return e.prototype.toggle=function(){this._change.next(!0)},Object.defineProperty(e.prototype,"change",{get:function(){return this._change.pipe(o.share())},enumerable:!0,configurable:!0}),e.decorators=[{type:i.Injectable,args:[{providedIn:"root"}]}],e.ngInjectableDef=i.defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),p="full-content__body",h="full-content__opened",f="full-content__hidden-title",g=function(){function e(e,t,n,o,r){this.el=e,this.cdr=t,this.srv=n,this.router=o,this.doc=r,this.inited=!1,this.id="_full-content-"+Math.random().toString(36).substring(2),this.scroll$=null,this._height=0,this.hideTitle=!0,this.padding=24,this.fullscreenChange=new i.EventEmitter}return e.prototype.updateCls=function(){var e=this.bodyEl.classList;this.fullscreen?(e.add(h),this.hideTitle&&e.add(f)):(e.remove(h),this.hideTitle&&e.remove(f))},e.prototype.update=function(){this.updateCls(),this.updateHeight(),this.fullscreenChange.emit(this.fullscreen)},e.prototype.updateHeight=function(){this._height=this.bodyEl.getBoundingClientRect().height-this.el.nativeElement.getBoundingClientRect().top-this.padding,this.cdr.detectChanges()},e.prototype.removeInBody=function(){this.bodyEl.classList.remove(p,h,f)},e.prototype.ngOnInit=function(){var e=this;this.inited=!0,this.bodyEl=this.doc.querySelector("body"),this.bodyEl.classList.add(p),this.el.nativeElement.id=this.id,this.updateCls(),this.scroll$=n.fromEvent(window,"resize").pipe(o.debounceTime(200)).subscribe(function(){return e.updateHeight()}),this.srv$=this.srv.change.pipe(o.filter(function(e){return null!==e})).subscribe(function(){return e.toggle()}),this.route$=this.router.events.pipe(o.filter(function(e){return e instanceof t.ActivationStart||e instanceof t.ActivationEnd}),o.debounceTime(200)).subscribe(function(){e.doc.querySelector("#"+e.id)?(e.bodyEl.classList.add(p),e.updateCls()):e.removeInBody()})},e.prototype.toggle=function(){this.fullscreen=!this.fullscreen,this.update(),this.updateHeight()},e.prototype.ngAfterViewInit=function(){var e=this;setTimeout(function(){return e.updateHeight()})},e.prototype.ngOnChanges=function(){this.inited&&this.update()},e.prototype.ngOnDestroy=function(){this.removeInBody(),this.scroll$.unsubscribe(),this.srv$.unsubscribe(),this.route$.unsubscribe()},e.decorators=[{type:i.Component,args:[{selector:"full-content",template:"\n    <ng-content></ng-content>\n  ",host:{"[class.full-content]":"true","[style.height.px]":"_height"},changeDetection:i.ChangeDetectionStrategy.OnPush}]}],e.ctorParameters=function(){return[{type:i.ElementRef},{type:i.ChangeDetectorRef},{type:d},{type:t.Router},{type:undefined,decorators:[{type:i.Inject,args:[r.DOCUMENT]}]}]},e.propDecorators={fullscreen:[{type:i.Input}],hideTitle:[{type:i.Input}],padding:[{type:i.Input}],fullscreenChange:[{type:i.Output}]},l([u.InputBoolean(),c("design:type",Boolean)],e.prototype,"fullscreen",void 0),l([u.InputBoolean(),c("design:type",Object)],e.prototype,"hideTitle",void 0),l([u.InputNumber(),c("design:type",Object)],e.prototype,"padding",void 0),e}(),y=function(){function e(e){this.parent=e}return e.prototype._click=function(){this.parent.toggle()},e.decorators=[{type:i.Directive,args:[{selector:"[full-toggle]",host:{"(click)":"_click()"}}]}],e.ctorParameters=function(){return[{type:g}]},e}(),b=[g,y],m=function(){function e(){}return e.decorators=[{type:i.NgModule,args:[{imports:[r.CommonModule,u.DelonUtilModule],declarations:a(b),exports:a(b)}]}],e}();e.FullContentComponent=g,e.FullContentService=d,e.FullContentToggleDirective=y,e.FullContentModule=m,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=fullContent.umd.min.js.map