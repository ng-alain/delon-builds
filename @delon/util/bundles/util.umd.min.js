/**
 * @license ng-alain(cipchk@qq.com) v10.1.2
 * (c) 2020 cipchk https://ng-alain.com/
 * License: MIT
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("extend"),require("date-fns/addDays"),require("date-fns/endOfDay"),require("date-fns/endOfMonth"),require("date-fns/endOfWeek"),require("date-fns/endOfYear"),require("date-fns/parse"),require("date-fns/parseISO"),require("date-fns/startOfDay"),require("date-fns/startOfMonth"),require("date-fns/startOfWeek"),require("date-fns/startOfYear"),require("date-fns/subMonths"),require("date-fns/subWeeks"),require("date-fns/subYears"),require("@angular/common"),require("@angular/core"),require("rxjs"),require("rxjs/operators"),require("ng-zorro-antd/core/environments"),require("ng-zorro-antd/core/tree")):"function"==typeof define&&define.amd?define("@delon/util",["exports","extend","date-fns/addDays","date-fns/endOfDay","date-fns/endOfMonth","date-fns/endOfWeek","date-fns/endOfYear","date-fns/parse","date-fns/parseISO","date-fns/startOfDay","date-fns/startOfMonth","date-fns/startOfWeek","date-fns/startOfYear","date-fns/subMonths","date-fns/subWeeks","date-fns/subYears","@angular/common","@angular/core","rxjs","rxjs/operators","ng-zorro-antd/core/environments","ng-zorro-antd/core/tree"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).delon=e.delon||{},e.delon.util={}),e.Extend,e.addDays,e.endOfDay,e.endOfMonth,e.endOfWeek,e.endOfYear,e.parse,e.parseISO,e.startOfDay,e.startOfMonth,e.startOfWeek,e.startOfYear,e.subMonths,e.subWeeks,e.subYears,e.ng.common,e.ng.core,e.rxjs,e.rxjs.operators,e.environments,e.tree)}(this,(function(e,t,n,r,a,o,i,u,c,d,s,l,f,p,y,h,m,v,g,b,M,N){"use strict";function O(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var j=O(t),k=O(n),w=O(r),I=O(a),x=O(o),S=O(i),T=O(u),C=O(c),D=O(d),A=O(s),q=O(l),_=O(f),E=O(p),P=O(y),L=O(h);Object.create;function H(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function W(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i}function Y(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(W(arguments[t]));return e}Object.create;function $(e,t,n){if(!e||null==t||0===t.length)return n;if(Array.isArray(t)||(t=~t.indexOf(".")?t.split("."):[t]),1===t.length){var r=e[t[0]];return void 0===r?n:r}var a=t.reduce((function(e,t){return(e||{})[t]}),e);return void 0===a?n:a}function z(e){return j.default(!0,{},{_:e})._}function B(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(Array.isArray(e)||"object"!=typeof e)return e;var a=function(e){return"object"==typeof e||"function"==typeof e},o=function(e,n){return Object.keys(n).filter((function(e){return"__proto__"!==e&&Object.prototype.hasOwnProperty.call(n,e)})).forEach((function(r){var i=n[r],u=e[r];Array.isArray(u)?e[r]=t?i:Y(u,i):null!=i&&a(i)&&null!=u&&a(u)?e[r]=o(u,i):e[r]=z(i)})),e};return n.filter((function(e){return null!=e&&a(e)})).forEach((function(t){return o(e,t)})),e}function F(e){return[D.default(e[0]),w.default(e[1])]}var U=function(){function e(e){this.doc=e,this.list={},this.cached={},this._notify=new g.BehaviorSubject([])}return Object.defineProperty(e.prototype,"change",{get:function(){return this._notify.asObservable().pipe(b.share(),b.filter((function(e){return 0!==e.length})))},enumerable:!1,configurable:!0}),e.prototype.clear=function(){this.list={},this.cached={}},e.prototype.load=function(e){var t=this;Array.isArray(e)||(e=[e]);var n=[];return e.forEach((function(e){e.endsWith(".js")?n.push(t.loadScript(e)):n.push(t.loadStyle(e))})),Promise.all(n).then((function(e){return t._notify.next(e),Promise.resolve(e)}))},e.prototype.loadScript=function(e,t){var n=this;return new Promise((function(r){if(!0!==n.list[e]){n.list[e]=!0;var a=function(t){n.cached[e]=t,r(t),n._notify.next([t])},o=n.doc.createElement("script");o.type="text/javascript",o.src=e,o.charset="utf-8",t&&(o.innerHTML=t),o.readyState?o.onreadystatechange=function(){"loaded"!==o.readyState&&"complete"!==o.readyState||(o.onreadystatechange=null,a({path:e,status:"ok"}))}:o.onload=function(){return a({path:e,status:"ok"})},o.onerror=function(t){return a({path:e,status:"error",error:t})},n.doc.getElementsByTagName("head")[0].appendChild(o)}else r(Object.assign(Object.assign({},n.cached[e]),{status:"loading"}))}))},e.prototype.loadStyle=function(e,t,n){var r=this;return void 0===t&&(t="stylesheet"),new Promise((function(a){if(!0!==r.list[e]){r.list[e]=!0;var o=r.doc.createElement("link");o.rel=t,o.type="text/css",o.href=e,n&&(o.innerHTML=n),r.doc.getElementsByTagName("head")[0].appendChild(o);var i={path:e,status:"ok"};r.cached[e]=i,a(i)}else a(r.cached[e])}))},e}();function V(e){return/^((-?\d+\.\d+)|(-?\d+)|(-?\.\d+))$/.test(e.toString())}function G(e){return V(e)&&parseInt(e.toString(),10).toString()===e.toString()}function K(e){return V(e)&&!G(e)}function R(e){return"string"==typeof e&&/(^\d{15}$)|(^\d{17}([0-9]|X)$)/i.test(e)}function X(e){return"string"==typeof e&&/^(0|\+?86|17951)?(13[0-9]|15[0-9]|17[0678]|18[0-9]|14[57])[0-9]{8}$/.test(e)}function Z(e){return/(((^https?:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+(?::\d+)?|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[\w]*))?)$/.test(e)}U.decorators=[{type:v.Injectable,args:[{providedIn:"root"}]}],U.ctorParameters=function(){return[{type:void 0,decorators:[{type:v.Inject,args:[m.DOCUMENT]}]}]},U.ɵprov=v.ɵɵdefineInjectable({factory:function(){return new U(v.ɵɵinject(m.DOCUMENT))},token:U,providedIn:"root"});var J=function(){function e(){}return e.num=function(e){return V(e.value)?null:{num:!0}},e.int=function(e){return G(e.value)?null:{int:!0}},e.decimal=function(e){return K(e.value)?null:{decimal:!0}},e.idCard=function(e){return R(e.value)?null:{idCard:!0}},e.mobile=function(e){return X(e.value)?null:{mobile:!0}},e.url=function(e){return Z(e.value)?null:{url:!0}},e}(),Q={},ee="[@DELON]:";function te(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.reduce((function(e,t){return e+t.toString()}),"");return!Q[n]&&(Q[n]=!0,!0)}function ne(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];(M.environment.isTestMode||v.isDevMode()&&te.apply(void 0,Y(t)))&&e.apply(void 0,Y(t))}var re=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ne.apply(void 0,Y([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return console.warn.apply(console,Y([ee],e))}],e))},ae=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(M.environment.isTestMode)return function(){};var n=(new Error).stack;return ne.apply(void 0,Y([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return console.warn.apply(console,Y([ee,"deprecated:"],e,[n]))}],e))};function oe(e,t,n){return function(r,a,o){var i="$$__"+a;return Object.prototype.hasOwnProperty.call(r,i)&&re('The prop "'+i+'" is already exist, it will be overrided by '+e+" decorator."),Object.defineProperty(r,i,{configurable:!0,writable:!0}),{get:function(){return o&&o.get?o.get.bind(this)():this[i]},set:function(e){o&&o.set&&o.set.bind(this)(t(e,n)),this[i]=t(e,n)}}}}function ie(e,t){return void 0===t&&(t=!1),t&&void 0===e?void 0:null!=e&&""+e!="false"}function ue(e,t){return void 0===t&&(t=0),isNaN(parseFloat(e))||isNaN(Number(e))?t:Number(e)}var ce=function(){};var de=new v.InjectionToken("alain-config",{providedIn:"root",factory:se});function se(){return{}}var le=function(){function e(e){this.config=Object.assign({},e)}return e.prototype.get=function(e,t){var n,r=this.config[e]||{};return t?((n={})[t]=r[t],n):r},e.prototype.merge=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return B.apply(void 0,Y([{},!0],t,[this.get(e)]))},e.prototype.attach=function(e,t,n){Object.assign(e,this.merge(t,n))},e.prototype.attachKey=function(e,t,n){Object.assign(e,this.get(t,n))},e.prototype.set=function(e,t){this.config[e]=Object.assign(Object.assign({},this.config[e]),t)},e}();le.decorators=[{type:v.Injectable,args:[{providedIn:"root"}]}],le.ctorParameters=function(){return[{type:void 0,decorators:[{type:v.Optional},{type:v.Inject,args:[de]}]}]},le.ɵprov=v.ɵɵdefineInjectable({factory:function(){return new le(v.ɵɵinject(de,8))},token:le,providedIn:"root"});var fe=function(){function e(e){this.c=e.merge("utilArray",{deepMapName:"deep",parentMapName:"parent",idMapName:"id",parentIdMapName:"parent_id",childrenMapName:"children",titleMapName:"title",checkedMapname:"checked",selectedMapname:"selected",expandedMapname:"expanded",disabledMapname:"disabled"})}return e.prototype.treeToArr=function(e,t){var n=Object.assign({deepMapName:this.c.deepMapName,parentMapName:this.c.parentMapName,childrenMapName:this.c.childrenMapName,clearChildren:!0,cb:null},t),r=[],a=function(e,t,o){var i,u;void 0===o&&(o=0);try{for(var c=H(e),d=c.next();!d.done;d=c.next()){var s=d.value;s[n.deepMapName]=o,s[n.parentMapName]=t,n.cb&&n.cb(s,t,o),r.push(s);var l=s[n.childrenMapName];null!=l&&Array.isArray(l)&&l.length>0&&a(l,s,o+1),n.clearChildren&&delete s[n.childrenMapName]}}catch(e){i={error:e}}finally{try{d&&!d.done&&(u=c.return)&&u.call(c)}finally{if(i)throw i.error}}};return a(e,1),r},e.prototype.arrToTree=function(e,t){var n,r,a=Object.assign({idMapName:this.c.idMapName,parentIdMapName:this.c.parentIdMapName,childrenMapName:this.c.childrenMapName,cb:null},t),o=[],i={};try{for(var u=H(e),c=u.next();!c.done;c=u.next()){var d=c.value,s=d[a.idMapName],l=d[a.parentIdMapName];i[s]=i[s]||[],d[a.childrenMapName]=i[s],a.cb&&a.cb(d),l?(i[l]=i[l]||[],i[l].push(d)):o.push(d)}}catch(e){n={error:e}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}return o},e.prototype.arrToTreeNode=function(e,t){var n=Object.assign({idMapName:this.c.idMapName,parentIdMapName:this.c.parentIdMapName,titleMapName:this.c.titleMapName,isLeafMapName:"isLeaf",checkedMapname:this.c.checkedMapname,selectedMapname:this.c.selectedMapname,expandedMapname:this.c.expandedMapname,disabledMapname:this.c.disabledMapname,cb:null},t),r=this.arrToTree(e,{idMapName:n.idMapName,parentIdMapName:n.parentIdMapName,childrenMapName:"children"});return this.visitTree(r,(function(e,t,r){e.key=e[n.idMapName],e.title=e[n.titleMapName],e.checked=e[n.checkedMapname],e.selected=e[n.selectedMapname],e.expanded=e[n.expandedMapname],e.disabled=e[n.disabledMapname],null==e[n.isLeafMapName]?e.isLeaf=0===e.children.length:e.isLeaf=e[n.isLeafMapName],n.cb&&n.cb(e,t,r)})),r.map((function(e){return new N.NzTreeNode(e)}))},e.prototype.visitTree=function(e,t,n){n=Object.assign({childrenMapName:this.c.childrenMapName},n);var r=function(e,a,o){var i,u;try{for(var c=H(e),d=c.next();!d.done;d=c.next()){var s=d.value;t(s,a,o);var l=s[n.childrenMapName];l&&l.length>0&&r(l,s,o+1)}}catch(e){i={error:e}}finally{try{d&&!d.done&&(u=c.return)&&u.call(c)}finally{if(i)throw i.error}}};r(e,null,1)},e.prototype.getKeysByTreeNode=function(e,t){var n=Object.assign({includeHalfChecked:!0},t),r=[];return this.visitTree(e,(function(e,t,a){(e.isChecked||n.includeHalfChecked&&e.isHalfChecked)&&r.push(n.cb?n.cb(e,t,a):n.keyMapName?e.origin[n.keyMapName]:e.key)})),r},e}();fe.decorators=[{type:v.Injectable,args:[{providedIn:"root"}]}],fe.ctorParameters=function(){return[{type:le}]},fe.ɵprov=v.ɵɵdefineInjectable({factory:function(){return new fe(v.ɵɵinject(le))},token:fe,providedIn:"root"});var pe=function(){};pe.decorators=[{type:v.NgModule,args:[{}]}],e.ALAIN_CONFIG=de,e.ALAIN_CONFIG_FACTORY=se,e.AlainConfigService=le,e.AlainSVConfig=ce,e.ArrayService=fe,e.DelonUtilModule=pe,e.InputBoolean=function(e){return void 0===e&&(e=!1),oe("InputNumber",ie,e)},e.InputNumber=function(e){return void 0===e&&(e=0),oe("InputNumber",ue,e)},e.LazyService=U,e.PREFIX=ee,e._Validators=J,e.copy=function(e){return new Promise((function(t){var n=null;try{(n=document.createElement("textarea")).style.height="0px",n.style.opacity="0",n.style.width="0px",document.body.appendChild(n),n.value=e,n.select(),document.execCommand("copy"),t(e)}finally{n&&n.parentNode&&n.parentNode.removeChild(n)}}))},e.deepCopy=z,e.deepGet=$,e.deepMerge=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return B.apply(void 0,Y([e,!1],t))},e.deepMergeKey=B,e.deprecation11=function(e,t,n){ae(e+" => '"+t+"' is going to be removed in 11.0.0"+(n?", Please use '"+n+"' instead":"")+".")},e.fixEndTimeOfRange=F,e.format=function(e,t,n){return void 0===n&&(n=!1),(e||"").replace(/\${([^}]+)}/g,(function(e,r){return n?$(t,r.split("."),""):(t||{})[r]||""}))},e.getTimeDistance=function(e,t){t=t?"string"==typeof t?T.default(t,"yyyy-MM-dd HH:mm:ss",new Date):new Date(t):new Date;var n,r={weekStartsOn:1};switch(e){case"today":n=[t,t];break;case"-today":n=[k.default(t,-1),t];break;case"yesterday":n=[k.default(t,-1),k.default(t,-1)];break;case"week":n=[q.default(t,r),x.default(t,r)];break;case"-week":n=[q.default(P.default(t,1),r),x.default(P.default(t,1),r)];break;case"month":n=[A.default(t),I.default(t)];break;case"-month":n=[A.default(E.default(t,1)),I.default(E.default(t,1))];break;case"year":n=[_.default(t),S.default(t)];break;case"-year":n=[_.default(L.default(t,1)),S.default(L.default(t,1))];break;default:n=e>0?[t,k.default(t,e)]:[k.default(t,e),t]}return F(n)},e.isDecimal=K,e.isEmpty=function(e){for(var t=e.childNodes,n=0;n<t.length;n++){var r=t.item(n);if(1===r.nodeType&&0!==r.outerHTML.toString().trim().length)return!1;if(3===r.nodeType&&0!==r.textContent.toString().trim().length)return!1}return!0},e.isIdCard=R,e.isInt=G,e.isMobile=X,e.isNum=V,e.isUrl=Z,e.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];v.isDevMode()&&console.log.apply(console,Y([ee],e))},e.toBoolean=ie,e.toDate=function(e,t){"string"==typeof t&&(t={formatString:t});var n=Object.assign({formatString:"yyyy-MM-dd HH:mm:ss",defaultValue:new Date(NaN)},t),r=n.formatString,a=n.defaultValue;if(null==e)return a;if(e instanceof Date)return e;if("number"==typeof e)return new Date(e);var o=isNaN(+e)?C.default(e):new Date(+e);return isNaN(o)&&(o=T.default(e,r,a)),isNaN(o)?a:o},e.toNumber=ue,e.updateHostClass=function(e,t,n,r){void 0===r&&(r=!1),!0===r?t.removeAttribute(e,"class"):function(e,t,n){for(var r in t)n.removeClass(e,r)}(e,n,t),function(e,t,n){for(var r in t)t[r]&&n.addClass(e,r)}(e,n=Object.assign({},n),t)},e.warn=re,e.warnDeprecation=ae,e.ɵa=le,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=util.umd.min.js.map