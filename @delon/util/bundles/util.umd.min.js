/**
 * @license ng-alain(cipchk@qq.com) v2.0.0-beta.4
 * (c) 2018 Cipchk https://ng-alain.com/
 * License: MIT
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("extend"),require("date-fns/parse"),require("date-fns/start_of_week"),require("date-fns/end_of_week"),require("date-fns/sub_weeks"),require("date-fns/start_of_month"),require("date-fns/end_of_month"),require("date-fns/sub_months"),require("date-fns/start_of_year"),require("date-fns/end_of_year"),require("date-fns/sub_years"),require("date-fns/add_days"),require("@angular/core"),require("@angular/common"),require("rxjs"),require("rxjs/operators"),require("ng-zorro-antd")):"function"==typeof define&&define.amd?define("@delon/util",["exports","extend","date-fns/parse","date-fns/start_of_week","date-fns/end_of_week","date-fns/sub_weeks","date-fns/start_of_month","date-fns/end_of_month","date-fns/sub_months","date-fns/start_of_year","date-fns/end_of_year","date-fns/sub_years","date-fns/add_days","@angular/core","@angular/common","rxjs","rxjs/operators","ng-zorro-antd"],t):t((e.delon=e.delon||{},e.delon.util={}),e.Extend,e.parse,e.startOfWeek,e.endOfWeek,e.subWeeks,e.startOfMonth,e.endOfMonth,e.subMonths,e.startOfYear,e.endOfYear,e.subYears,e.addDays,e.ng.core,e.ng.common,e.rxjs,e.rxjs.operators,e.ngZorro.antd)}(this,function(e,t,n,r,a,o,i,d,u,c,s,l,f,p,h,m,y,v){"use strict";function b(e,t,n){if(!e||null==t||0===t.length)return n;if(Array.isArray(t)||(t=~t.indexOf(".")?t.split("."):[t]),1!==t.length)return t.reduce(function(e,t){return(e||{})[t]},e)||n;var r=e[t[0]];return void 0===r?n:r}t=t&&t.hasOwnProperty("default")?t["default"]:t,n=n&&n.hasOwnProperty("default")?n["default"]:n,r=r&&r.hasOwnProperty("default")?r["default"]:r,a=a&&a.hasOwnProperty("default")?a["default"]:a,o=o&&o.hasOwnProperty("default")?o["default"]:o,i=i&&i.hasOwnProperty("default")?i["default"]:i,d=d&&d.hasOwnProperty("default")?d["default"]:d,u=u&&u.hasOwnProperty("default")?u["default"]:u,c=c&&c.hasOwnProperty("default")?c["default"]:c,s=s&&s.hasOwnProperty("default")?s["default"]:s,l=l&&l.hasOwnProperty("default")?l["default"]:l,f=f&&f.hasOwnProperty("default")?f["default"]:f;var M=function(){function e(e){this.doc=e,this.list={},this.cached={},this._notify=new m.BehaviorSubject([])}return Object.defineProperty(e.prototype,"change",{get:function(){return this._notify.asObservable().pipe(y.share(),y.filter(function(e){return 0!==e.length}))},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this.list={},this.cached={}},e.prototype.load=function(e){var t=this;Array.isArray(e)||(e=[e]);var n=[];return e.forEach(function(e){e.endsWith(".js")?n.push(t.loadScript(e)):n.push(t.loadStyle(e))}),Promise.all(n).then(function(e){return t._notify.next(e),Promise.resolve(e)})},e.prototype.loadScript=function(r,a){var o=this;return new Promise(function(t){if(!0!==o.list[r]){o.list[r]=!0;var n=function(e){o.cached[r]=e,t(e)},e=o.doc.createElement("script");e.type="text/javascript",e.src=r,e.charset="utf-8",a&&(e.innerHTML=a),e.readyState?e.onreadystatechange=function(){"loaded"!==e.readyState&&"complete"!==e.readyState||(e.onreadystatechange=null,n({path:r,loaded:!0,status:"ok"}))}:e.onload=function(){n({path:r,loaded:!0,status:"ok"})},e.onerror=function(e){return n({path:r,loaded:!1,status:"error"})},o.doc.getElementsByTagName("head")[0].appendChild(e)}else t(o.cached[r])})},e.prototype.loadStyle=function(r,a,o){var i=this;return void 0===a&&(a="stylesheet"),new Promise(function(e){if(!0!==i.list[r]){i.list[r]=!0;var t=i.doc.createElement("link");t.rel=a,t.type="text/css",t.href=r,o&&(t.innerHTML=o),i.doc.getElementsByTagName("head")[0].appendChild(t);var n={path:r,loaded:!0,status:"ok"};e(i.cached[r]=n)}else e(i.cached[r])})},e.decorators=[{type:p.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:undefined,decorators:[{type:p.Inject,args:[h.DOCUMENT]}]}]},e.ngInjectableDef=p.defineInjectable({factory:function(){return new e(p.inject(h.DOCUMENT))},token:e,providedIn:"root"}),e}();function N(e){return/^((-?\d+\.\d+)|(-?\d+)|(-?\.\d+))$/.test(e.toString())}function g(e){return N(e)&&parseInt(e.toString(),10)==e}function _(e){return N(e)&&!g(e)}function w(e){return"string"==typeof e&&/(^\d{15}$)|(^\d{17}([0-9]|X)$)/i.test(e)}function O(e){return"string"==typeof e&&/^(0|\+?86|17951)?(13[0-9]|15[0-9]|17[0678]|18[0-9]|14[57])[0-9]{8}$/.test(e)}var j=function(){function e(){}return e.num=function(e){return N(e.value)?null:{num:!0}},e["int"]=function(e){return g(e.value)?null:{"int":!0}},e.decimal=function(e){return _(e.value)?null:{decimal:!0}},e.idCard=function(e){return w(e.value)?null:{idCard:!0}},e.mobile=function(e){return O(e.value)?null:{mobile:!0}},e}();function x(e,t){return void 0===t&&(t=!1),t&&void 0===e?undefined:null!=e&&""+e!="false"}function k(e,t){return void 0===t&&(t=0),isNaN(parseFloat(e))||isNaN(Number(e))?t:Number(e)}var I=function(){return(I=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function P(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}var T=function(){function e(){}return e.decorators=[{type:p.Injectable,args:[{providedIn:"root"}]}],e.ngInjectableDef=p.defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),C=function(){function e(e){this.c=Object.assign({deepMapName:"deep",parentMapName:"parent",idMapName:"id",parentIdMapName:"parent_id",childrenMapName:"children",titleMapName:"title",checkedMapname:"checked",selectedMapname:"selected",expandedMapname:"expanded",disabledMapname:"disabled"},e&&e.array)}return e.prototype.treeToArr=function(e,s){s=Object.assign({deepMapName:this.c.deepMapName,parentMapName:this.c.parentMapName,childrenMapName:this.c.childrenMapName,clearChildren:!0,cb:null},s);var l=[],f=function(e,t,n){var r,a;try{for(var o=P(e),i=o.next();!i.done;i=o.next()){var d=i.value;d[s.deepMapName]=n,d[s.parentMapName]=t,s.cb&&s.cb(d,t,n),l.push(d);var u=d[s.childrenMapName];null!=u&&Array.isArray(u)&&0<u.length&&f(u,d,n+1),s.clearChildren&&delete d[s.childrenMapName]}}catch(c){r={error:c}}finally{try{i&&!i.done&&(a=o["return"])&&a.call(o)}finally{if(r)throw r.error}}};return f(e,1,null),l},e.prototype.arrToTree=function(e,t){var n,r;t=Object.assign({idMapName:this.c.idMapName,parentIdMapName:this.c.parentIdMapName,childrenMapName:this.c.childrenMapName,cb:null},t);var a=[],o={};try{for(var i=P(e),d=i.next();!d.done;d=i.next()){var u=d.value,c=u[t.idMapName],s=u[t.parentIdMapName];o[c]=o[c]||[],u[t.childrenMapName]=o[c],t.cb&&t.cb(u),s?(o[s]=o[s]||[],o[s].push(u)):a.push(u)}}catch(l){n={error:l}}finally{try{d&&!d.done&&(r=i["return"])&&r.call(i)}finally{if(n)throw n.error}}return a},e.prototype.arrToTreeNode=function(e,r){r=Object.assign({expanded:!1,idMapName:this.c.idMapName,parentIdMapName:this.c.parentIdMapName,titleMapName:this.c.titleMapName,isLeafMapName:"isLeaf",checkedMapname:this.c.checkedMapname,selectedMapname:this.c.selectedMapname,expandedMapname:this.c.expandedMapname,disabledMapname:this.c.disabledMapname,cb:null},r);var t=this.arrToTree(e,{idMapName:r.idMapName,parentIdMapName:r.parentIdMapName,childrenMapName:"children"});return this.visitTree(t,function(e,t,n){e.key=e[r.idMapName],e.title=e[r.titleMapName],e.checked=e[r.checkedMapname],e.selected=e[r.selectedMapname],e.expanded=e[r.expandedMapname],e.disabled=e[r.disabledMapname],null==e[r.isLeafMapName]?e.isLeaf=0===e.children.length:e.isLeaf=e[r.isLeafMapName],r.cb&&r.cb(e,t,n)}),t.map(function(e){return new v.NzTreeNode(e)})},e.prototype.visitTree=function(e,s,l){l=Object.assign({childrenMapName:this.c.childrenMapName},l);var f=function(e,t,n){var r,a;try{for(var o=P(e),i=o.next();!i.done;i=o.next()){var d=i.value;s(d,t,n);var u=d[l.childrenMapName];u&&0<u.length&&f(u,d,n+1)}}catch(c){r={error:c}}finally{try{i&&!i.done&&(a=o["return"])&&a.call(o)}finally{if(r)throw r.error}}};f(e,null,1)},e.prototype.getKeysByTreeNode=function(e,r){r=Object.assign({includeHalfChecked:!0},r);var a=[];return this.visitTree(e,function(e,t,n){(e.isChecked||r.includeHalfChecked&&e.isHalfChecked)&&a.push(r.cb?r.cb(e,t,n):r.keyMapName?e.origin[r.keyMapName]:e.key)}),a},e.decorators=[{type:p.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:T}]},e.ngInjectableDef=p.defineInjectable({factory:function(){return new e(p.inject(T))},token:e,providedIn:"root"}),e}(),q=function(){function e(){}return e.forRoot=function(){return{ngModule:e}},e.decorators=[{type:p.NgModule,args:[{imports:[h.CommonModule]}]}],e}();e._Validators=j,e.format=function S(e,n,r){return void 0===r&&(r=!1),(e||"").replace(/\${([^}]+)}/g,function(e,t){return r?b(n,t.split("."),""):(n||{})[t]||""})},e.yuan=function D(e,t){return void 0===t&&(t=2),"number"==typeof e&&(e=e.toFixed(t)),"&yen "+e},e.getTimeDistance=function E(e,t){switch(t=n(t||new Date),e){case"today":return[t,t];case"-today":return[f(t,-1),t];case"week":return[r(t),a(t)];case"-week":return[r(o(t,1)),a(o(t,1))];case"month":return[i(t),d(t)];case"-month":return[i(u(t,1)),d(u(t,1))];case"year":return[c(t),s(t)];case"-year":return[c(l(t,1)),s(l(t,1))];default:return 0<e?[t,f(t,e)]:[f(t,e),t]}},e.LazyService=M,e.isNum=N,e.isInt=g,e.isDecimal=_,e.isIdCard=w,e.isMobile=O,e.isEmpty=function L(e){for(var t=e.childNodes,n=0;n<t.length;n++){var r=t.item(n);if(1===r.nodeType&&0!==r.outerHTML.toString().trim().length)return!1;if(3===r.nodeType&&0!==r.textContent.toString().trim().length)return!1}return!0},e.toBoolean=x,e.InputBoolean=function A(r){return void 0===r&&(r=!1),function(e,t){var n="$$__"+t;Object.prototype.hasOwnProperty.call(e,n)&&console.warn('The prop "'+n+'" is already exist, it will be overrided by InputBoolean decorator.'),Object.defineProperty(e,n,{configurable:!0,writable:!0}),Object.defineProperty(e,t,{get:function(){return this[n]},set:function(e){this[n]=x(e,r)}})}},e.toNumber=k,e.InputNumber=function $(r){return void 0===r&&(r=0),function(e,t){var n="$$__"+t;Object.prototype.hasOwnProperty.call(e,n)&&console.warn('The prop "'+n+'" is already exist, it will be overrided by InputNumber decorator.'),Object.defineProperty(e,n,{configurable:!0,writable:!0}),Object.defineProperty(e,t,{get:function(){return this[n]},set:function(e){this[n]=k(e,r)}})}},e.deepGet=b,e.deepCopy=function B(e){return t(!0,{},{_:e})._},e.copy=function H(r){return new Promise(function(e,t){var n=null;try{(n=document.createElement("textarea")).style.height="0px",n.style.opacity="0",n.style.width="0px",document.body.appendChild(n),n.value=r,n.select(),document.execCommand("copy"),e(r)}finally{n&&n.parentNode&&n.parentNode.removeChild(n)}})},e.updateHostClass=function z(e,t,n,r){void 0===r&&(r=!1),!0===r?t.removeAttribute(e,"class"):function a(e,t,n){for(var r in t)n.removeClass(e,r)}(e,n,t),function o(e,t,n){for(var r in t)t[r]&&n.addClass(e,r)}(e,n=I({},n),t)},e.ArrayService=C,e.DelonUtilConfig=T,e.DelonUtilModule=q,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=util.umd.min.js.map