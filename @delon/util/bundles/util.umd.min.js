/**
 * @license ng-alain(cipchk@qq.com) v7.0.0-rc.4
 * (c) 2018 Cipchk https://ng-alain.com/
 * License: MIT
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("extend"),require("date-fns/add_days"),require("date-fns/end_of_month"),require("date-fns/end_of_week"),require("date-fns/end_of_year"),require("date-fns/parse"),require("date-fns/start_of_month"),require("date-fns/start_of_week"),require("date-fns/start_of_year"),require("date-fns/sub_months"),require("date-fns/sub_weeks"),require("date-fns/sub_years"),require("rxjs"),require("rxjs/operators"),require("ng-zorro-antd"),require("@angular/common"),require("@angular/core")):"function"==typeof define&&define.amd?define("@delon/util",["exports","extend","date-fns/add_days","date-fns/end_of_month","date-fns/end_of_week","date-fns/end_of_year","date-fns/parse","date-fns/start_of_month","date-fns/start_of_week","date-fns/start_of_year","date-fns/sub_months","date-fns/sub_weeks","date-fns/sub_years","rxjs","rxjs/operators","ng-zorro-antd","@angular/common","@angular/core"],t):t((e.delon=e.delon||{},e.delon.util={}),e.Extend,e.addDays,e.endOfMonth,e.endOfWeek,e.endOfYear,e.parse,e.startOfMonth,e.startOfWeek,e.startOfYear,e.subMonths,e.subWeeks,e.subYears,e.rxjs,e.rxjs.operators,e["ng-zorro-antd"],e.ng.common,e.ng.core)}(this,function(e,t,r,n,a,i,o,u,d,l,c,s,f,p,h,y,m,v){"use strict";t=t&&t.hasOwnProperty("default")?t["default"]:t,r=r&&r.hasOwnProperty("default")?r["default"]:r,n=n&&n.hasOwnProperty("default")?n["default"]:n,a=a&&a.hasOwnProperty("default")?a["default"]:a,i=i&&i.hasOwnProperty("default")?i["default"]:i,o=o&&o.hasOwnProperty("default")?o["default"]:o,u=u&&u.hasOwnProperty("default")?u["default"]:u,d=d&&d.hasOwnProperty("default")?d["default"]:d,l=l&&l.hasOwnProperty("default")?l["default"]:l,c=c&&c.hasOwnProperty("default")?c["default"]:c,s=s&&s.hasOwnProperty("default")?s["default"]:s,f=f&&f.hasOwnProperty("default")?f["default"]:f;var b=function(){function e(e,t){this.viewContainer=e,this.defaultTemplate=t,this.inputTemplate=null,this.inputViewRef=null,this.defaultViewRef=null}return Object.defineProperty(e.prototype,"stringTemplateOutlet",{set:function(e){e instanceof v.TemplateRef?(this.isTemplate=!0,this.inputTemplate=e):this.isTemplate=!1,this.updateView()},enumerable:!0,configurable:!0}),e.prototype.updateView=function(){this.isTemplate?this.inputViewRef||(this.viewContainer.clear(),this.defaultViewRef=null,this.inputViewRef=this.viewContainer.createEmbeddedView(this.inputTemplate)):this.defaultViewRef||(this.viewContainer.clear(),this.inputViewRef=null,this.defaultViewRef=this.viewContainer.createEmbeddedView(this.defaultTemplate))},e.decorators=[{type:v.Directive,args:[{selector:"[stringTemplateOutlet]"}]}],e.ctorParameters=function(){return[{type:v.ViewContainerRef},{type:v.TemplateRef}]},e.propDecorators={stringTemplateOutlet:[{type:v.Input}]},e}(),M=function(){return(M=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function w(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}function N(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)o.push(n.value)}catch(u){a={error:u}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(a)throw a.error}}return o}function g(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(N(arguments[t]));return e}function _(e,t,r){if(!e||null==t||0===t.length)return r;if(Array.isArray(t)||(t=~t.indexOf(".")?t.split("."):[t]),1!==t.length)return t.reduce(function(e,t){return(e||{})[t]},e)||r;var n=e[t[0]];return void 0===n?r:n}function O(e){return t(!0,{},{_:e})._}function x(t,i){for(var e=[],r=2;r<arguments.length;r++)e[r-2]=arguments[r];if(Array.isArray(t)||"object"!=typeof t)return t;var o=function(e){return"object"==typeof e||"function"==typeof e},u=function(n,a){return Object.keys(a).filter(function(e){return"__proto__"!==e&&Object.prototype.hasOwnProperty.call(a,e)}).forEach(function(e){var t=a[e],r=n[e];!i&&Array.isArray(r)?n[e]=g(r,t):null!=t&&o(t)&&null!=r&&o(r)?n[e]=u(r,t):n[e]=O(t)}),n};return e.filter(function(e){return o(e)}).forEach(function(e){return u(t,e)}),t}var T=function(){function e(e){this.doc=e,this.list={},this.cached={},this._notify=new p.BehaviorSubject([])}return Object.defineProperty(e.prototype,"change",{get:function(){return this._notify.asObservable().pipe(h.share(),h.filter(function(e){return 0!==e.length}))},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this.list={},this.cached={}},e.prototype.load=function(e){var t=this;Array.isArray(e)||(e=[e]);var r=[];return e.forEach(function(e){e.endsWith(".js")?r.push(t.loadScript(e)):r.push(t.loadStyle(e))}),Promise.all(r).then(function(e){return t._notify.next(e),Promise.resolve(e)})},e.prototype.loadScript=function(n,a){var i=this;return new Promise(function(t){if(!0!==i.list[n]){i.list[n]=!0;var r=function(e){i.cached[n]=e,t(e)},e=i.doc.createElement("script");e.type="text/javascript",e.src=n,e.charset="utf-8",a&&(e.innerHTML=a),e.readyState?e.onreadystatechange=function(){"loaded"!==e.readyState&&"complete"!==e.readyState||(e.onreadystatechange=null,r({path:n,loaded:!0,status:"ok"}))}:e.onload=function(){return r({path:n,loaded:!0,status:"ok"})},e.onerror=function(e){return r({path:n,loaded:!1,status:"error",error:e})},i.doc.getElementsByTagName("head")[0].appendChild(e)}else t(i.cached[n])})},e.prototype.loadStyle=function(n,a,i){var o=this;return void 0===a&&(a="stylesheet"),new Promise(function(e){if(!0!==o.list[n]){o.list[n]=!0;var t=o.doc.createElement("link");t.rel=a,t.type="text/css",t.href=n,i&&(t.innerHTML=i),o.doc.getElementsByTagName("head")[0].appendChild(t);var r={path:n,loaded:!0,status:"ok"};e(o.cached[n]=r)}else e(o.cached[n])})},e.decorators=[{type:v.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:undefined,decorators:[{type:v.Inject,args:[m.DOCUMENT]}]}]},e.ngInjectableDef=v.defineInjectable({factory:function(){return new e(v.inject(m.DOCUMENT))},token:e,providedIn:"root"}),e}();function j(e){return/^((-?\d+\.\d+)|(-?\d+)|(-?\.\d+))$/.test(e.toString())}function k(e){return j(e)&&parseInt(e.toString(),10)==e}function I(e){return j(e)&&!k(e)}function P(e){return"string"==typeof e&&/(^\d{15}$)|(^\d{17}([0-9]|X)$)/i.test(e)}function C(e){return"string"==typeof e&&/^(0|\+?86|17951)?(13[0-9]|15[0-9]|17[0678]|18[0-9]|14[57])[0-9]{8}$/.test(e)}function S(e){return/(((^https?:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+(?::\d+)?|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[\w]*))?)$/.test(e)}var q=function(){function e(){}return e.num=function(e){return j(e.value)?null:{num:!0}},e["int"]=function(e){return k(e.value)?null:{"int":!0}},e.decimal=function(e){return I(e.value)?null:{decimal:!0}},e.idCard=function(e){return P(e.value)?null:{idCard:!0}},e.mobile=function(e){return C(e.value)?null:{mobile:!0}},e.url=function(e){return S(e.value)?null:{url:!0}},e}();function A(e,t){return void 0===t&&(t=!1),t&&void 0===e?undefined:null!=e&&""+e!="false"}function D(e,t){return void 0===t&&(t=0),isNaN(parseFloat(e))||isNaN(Number(e))?t:Number(e)}var E=function(){function e(){}return e.decorators=[{type:v.Injectable,args:[{providedIn:"root"}]}],e.ngInjectableDef=v.defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),V=function(){function e(e){this.c=M({deepMapName:"deep",parentMapName:"parent",idMapName:"id",parentIdMapName:"parent_id",childrenMapName:"children",titleMapName:"title",checkedMapname:"checked",selectedMapname:"selected",expandedMapname:"expanded",disabledMapname:"disabled"},e&&e.array)}return e.prototype.treeToArr=function(e,c){c=M({deepMapName:this.c.deepMapName,parentMapName:this.c.parentMapName,childrenMapName:this.c.childrenMapName,clearChildren:!0,cb:null},c);var s=[],f=function(e,t,r){var n,a;try{for(var i=w(e),o=i.next();!o.done;o=i.next()){var u=o.value;u[c.deepMapName]=r,u[c.parentMapName]=t,c.cb&&c.cb(u,t,r),s.push(u);var d=u[c.childrenMapName];null!=d&&Array.isArray(d)&&0<d.length&&f(d,u,r+1),c.clearChildren&&delete u[c.childrenMapName]}}catch(l){n={error:l}}finally{try{o&&!o.done&&(a=i["return"])&&a.call(i)}finally{if(n)throw n.error}}};return f(e,1,null),s},e.prototype.arrToTree=function(e,t){var r,n;t=M({idMapName:this.c.idMapName,parentIdMapName:this.c.parentIdMapName,childrenMapName:this.c.childrenMapName,cb:null},t);var a=[],i={};try{for(var o=w(e),u=o.next();!u.done;u=o.next()){var d=u.value,l=d[t.idMapName],c=d[t.parentIdMapName];i[l]=i[l]||[],d[t.childrenMapName]=i[l],t.cb&&t.cb(d),c?(i[c]=i[c]||[],i[c].push(d)):a.push(d)}}catch(s){r={error:s}}finally{try{u&&!u.done&&(n=o["return"])&&n.call(o)}finally{if(r)throw r.error}}return a},e.prototype.arrToTreeNode=function(e,n){n=M({idMapName:this.c.idMapName,parentIdMapName:this.c.parentIdMapName,titleMapName:this.c.titleMapName,isLeafMapName:"isLeaf",checkedMapname:this.c.checkedMapname,selectedMapname:this.c.selectedMapname,expandedMapname:this.c.expandedMapname,disabledMapname:this.c.disabledMapname,cb:null},n);var t=this.arrToTree(e,{idMapName:n.idMapName,parentIdMapName:n.parentIdMapName,childrenMapName:"children"});return this.visitTree(t,function(e,t,r){e.key=e[n.idMapName],e.title=e[n.titleMapName],e.checked=e[n.checkedMapname],e.selected=e[n.selectedMapname],e.expanded=e[n.expandedMapname],e.disabled=e[n.disabledMapname],null==e[n.isLeafMapName]?e.isLeaf=0===e.children.length:e.isLeaf=e[n.isLeafMapName],n.cb&&n.cb(e,t,r)}),t.map(function(e){return new y.NzTreeNode(e)})},e.prototype.visitTree=function(e,c,s){s=M({childrenMapName:this.c.childrenMapName},s);var f=function(e,t,r){var n,a;try{for(var i=w(e),o=i.next();!o.done;o=i.next()){var u=o.value;c(u,t,r);var d=u[s.childrenMapName];d&&0<d.length&&f(d,u,r+1)}}catch(l){n={error:l}}finally{try{o&&!o.done&&(a=i["return"])&&a.call(i)}finally{if(n)throw n.error}}};f(e,null,1)},e.prototype.getKeysByTreeNode=function(e,n){n=M({includeHalfChecked:!0},n);var a=[];return this.visitTree(e,function(e,t,r){(e.isChecked||n.includeHalfChecked&&e.isHalfChecked)&&a.push(n.cb?n.cb(e,t,r):n.keyMapName?e.origin[n.keyMapName]:e.key)}),a},e.decorators=[{type:v.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:E}]},e.ngInjectableDef=v.defineInjectable({factory:function(){return new e(v.inject(E))},token:e,providedIn:"root"}),e}(),$=function(){function e(){}return e.decorators=[{type:v.NgModule,args:[{imports:[m.CommonModule],declarations:[b],exports:[b]}]}],e}();e._Validators=q,e.StringTemplateOutletDirective=b,e.format=function R(e,r,n){return void 0===n&&(n=!1),(e||"").replace(/\${([^}]+)}/g,function(e,t){return n?_(r,t.split("."),""):(r||{})[t]||""})},e.getTimeDistance=function L(e,t){switch(t=o(t||new Date),e){case"today":return[t,t];case"-today":return[r(t,-1),t];case"week":return[d(t),a(t)];case"-week":return[d(s(t,1)),a(s(t,1))];case"month":return[u(t),n(t)];case"-month":return[u(c(t,1)),n(c(t,1))];case"year":return[l(t),i(t)];case"-year":return[l(f(t,1)),i(f(t,1))];default:return 0<e?[t,r(t,e)]:[r(t,e),t]}},e.LazyService=T,e.isNum=j,e.isInt=k,e.isDecimal=I,e.isIdCard=P,e.isMobile=C,e.isUrl=S,e.isEmpty=function z(e){for(var t=e.childNodes,r=0;r<t.length;r++){var n=t.item(r);if(1===n.nodeType&&0!==n.outerHTML.toString().trim().length)return!1;if(3===n.nodeType&&0!==n.textContent.toString().trim().length)return!1}return!0},e.toBoolean=A,e.InputBoolean=function B(n){return void 0===n&&(n=!1),function(e,t){var r="$$__"+t;Object.prototype.hasOwnProperty.call(e,r)&&console.warn('The prop "'+r+'" is already exist, it will be overrided by InputBoolean decorator.'),Object.defineProperty(e,r,{configurable:!0,writable:!0}),Object.defineProperty(e,t,{get:function(){return this[r]},set:function(e){this[r]=A(e,n)}})}},e.toNumber=D,e.InputNumber=function H(n){return void 0===n&&(n=0),function(e,t){var r="$$__"+t;Object.prototype.hasOwnProperty.call(e,r)&&console.warn('The prop "'+r+'" is already exist, it will be overrided by InputNumber decorator.'),Object.defineProperty(e,r,{configurable:!0,writable:!0}),Object.defineProperty(e,t,{get:function(){return this[r]},set:function(e){this[r]=D(e,n)}})}},e.deepGet=_,e.deepCopy=O,e.copy=function U(n){return new Promise(function(e,t){var r=null;try{(r=document.createElement("textarea")).style.height="0px",r.style.opacity="0",r.style.width="0px",document.body.appendChild(r),r.value=n,r.select(),document.execCommand("copy"),e(n)}finally{r&&r.parentNode&&r.parentNode.removeChild(r)}})},e.deepMergeKey=x,e.deepMerge=function W(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return x.apply(void 0,g([e,!1],t))},e.updateHostClass=function Y(e,t,r,n){void 0===n&&(n=!1),!0===n?t.removeAttribute(e,"class"):function a(e,t,r){for(var n in t)r.removeClass(e,n)}(e,r,t),function i(e,t,r){for(var n in t)t[n]&&r.addClass(e,n)}(e,r=M({},r),t)},e.ArrayService=V,e.DelonUtilConfig=E,e.DelonUtilModule=$,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=util.umd.min.js.map