{"version":3,"file":"widgets-tag.mjs","sources":["../../../../packages/form/widgets/tag/widget.ts","../../../../packages/form/widgets/tag/module.ts","../../../../packages/form/widgets/tag/index.ts","../../../../packages/form/widgets/tag/widgets-tag.ts"],"sourcesContent":["import { NgTemplateOutlet } from '@angular/common';\nimport { Component, ViewEncapsulation } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\n\nimport { ControlUIWidget, DelonFormModule, SFSchemaEnum, SFValue, getData } from '@delon/form';\nimport { NzIconModule } from 'ng-zorro-antd/icon';\nimport { NzTagModule } from 'ng-zorro-antd/tag';\n\nimport type { SFTagWidgetSchema } from './schema';\n\n@Component({\n  selector: 'sf-tag',\n  template: `<sf-item-wrap\n    [id]=\"id\"\n    [schema]=\"schema\"\n    [ui]=\"ui\"\n    [showError]=\"showError\"\n    [error]=\"error\"\n    [showTitle]=\"schema.title\"\n  >\n    <ng-template #icon let-i>\n      <i\n        nz-icon\n        [nzType]=\"i.type\"\n        [nzTheme]=\"i.theme\"\n        [nzTwotoneColor]=\"i.twotoneColor\"\n        [nzRotate]=\"i.rotate\"\n        [nzIconfont]=\"i.iconfont\"\n        [nzSpin]=\"i.spin\"\n      ></i>\n    </ng-template>\n    @for (i of data; track $index) {\n      <nz-tag\n        [nzMode]=\"ui.mode || 'checkable'\"\n        [nzChecked]=\"i.checked\"\n        (nzOnClose)=\"_close($event)\"\n        (nzCheckedChange)=\"onChange(i)\"\n      >\n        @if (i.prefixIcon) {\n          <ng-template [ngTemplateOutlet]=\"icon\" [ngTemplateOutletContext]=\"{ $implicit: i.prefixIcon }\" />\n        }\n        <span>{{ i.label }}</span>\n        @if (i.suffixIcon) {\n          <ng-template [ngTemplateOutlet]=\"icon\" [ngTemplateOutletContext]=\"{ $implicit: i.suffixIcon }\" />\n        }\n      </nz-tag>\n    }\n  </sf-item-wrap>`,\n  preserveWhitespaces: false,\n  encapsulation: ViewEncapsulation.None,\n  imports: [FormsModule, NgTemplateOutlet, DelonFormModule, NzTagModule, NzIconModule]\n})\nexport class TagWidget extends ControlUIWidget<SFTagWidgetSchema> {\n  static readonly KEY = 'tag';\n\n  data: SFSchemaEnum[] = [];\n\n  reset(value: SFValue): void {\n    getData(this.schema, this.ui, value).subscribe(list => {\n      this.data = list;\n      this.detectChanges();\n    });\n  }\n\n  onChange(item: SFSchemaEnum): void {\n    item.checked = !item.checked;\n    this.updateValue();\n    if (this.ui.checkedChange) {\n      this.ui.checkedChange(item.checked);\n    }\n  }\n\n  _close(e: MouseEvent): void {\n    if (this.ui.onClose) this.ui.onClose(e);\n  }\n\n  private updateValue(): void {\n    this.formProperty.setValue(\n      this.data.filter(w => w.checked).map(i => i.value),\n      false\n    );\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\n\nimport { DelonFormModule, WidgetRegistry } from '@delon/form';\nimport { NzIconModule } from 'ng-zorro-antd/icon';\nimport { NzTagModule } from 'ng-zorro-antd/tag';\n\nimport { TagWidget } from './widget';\n\n@NgModule({\n  imports: [FormsModule, DelonFormModule, NzTagModule, NzIconModule, CommonModule, TagWidget]\n})\nexport class TagWidgetModule {\n  constructor(widgetRegistry: WidgetRegistry) {\n    widgetRegistry.register(TagWidget.KEY, TagWidget);\n  }\n}\n","import type { SFWidgetProvideConfig } from '@delon/form';\n\nimport { TagWidget } from './widget';\n\nexport * from './widget';\nexport * from './schema';\nexport * from './module';\n\nexport function withTagWidget(): SFWidgetProvideConfig {\n  return { KEY: TagWidget.KEY, type: TagWidget };\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}